{"nbformat":4,"nbformat_minor":0,"metadata":{"colab":{"provenance":[],"mount_file_id":"1H_lDEpDQOw1qbNAALpf8Xtvr_IQ3Ynvc","authorship_tag":"ABX9TyOoiIGx7OyV8kxdXVbIZ/Wt"},"kernelspec":{"name":"python3","display_name":"Python 3"},"language_info":{"name":"python"},"widgets":{"application/vnd.jupyter.widget-state+json":{"7064599924b7490ca9d94bc2be961436":{"model_module":"@jupyter-widgets/controls","model_name":"HBoxModel","model_module_version":"1.5.0","state":{"_dom_classes":[],"_model_module":"@jupyter-widgets/controls","_model_module_version":"1.5.0","_model_name":"HBoxModel","_view_count":null,"_view_module":"@jupyter-widgets/controls","_view_module_version":"1.5.0","_view_name":"HBoxView","box_style":"","children":["IPY_MODEL_31fb9f96f004437e9638ad0be3297377","IPY_MODEL_30b46b8363774e0fb3cc078ede9aabfa","IPY_MODEL_dd447804de7648a586609ac62013356e"],"layout":"IPY_MODEL_1924380db4be4e799452bdfadf797dc6"}},"31fb9f96f004437e9638ad0be3297377":{"model_module":"@jupyter-widgets/controls","model_name":"HTMLModel","model_module_version":"1.5.0","state":{"_dom_classes":[],"_model_module":"@jupyter-widgets/controls","_model_module_version":"1.5.0","_model_name":"HTMLModel","_view_count":null,"_view_module":"@jupyter-widgets/controls","_view_module_version":"1.5.0","_view_name":"HTMLView","description":"","description_tooltip":null,"layout":"IPY_MODEL_2abf36c673e849f3b240debf6e4e1b18","placeholder":"​","style":"IPY_MODEL_0b9105deb4264a5d885776bd6553320a","value":"Downloading: 100%"}},"30b46b8363774e0fb3cc078ede9aabfa":{"model_module":"@jupyter-widgets/controls","model_name":"FloatProgressModel","model_module_version":"1.5.0","state":{"_dom_classes":[],"_model_module":"@jupyter-widgets/controls","_model_module_version":"1.5.0","_model_name":"FloatProgressModel","_view_count":null,"_view_module":"@jupyter-widgets/controls","_view_module_version":"1.5.0","_view_name":"ProgressView","bar_style":"success","description":"","description_tooltip":null,"layout":"IPY_MODEL_7441ff48a8da49228e6d7b684547c5ed","max":629,"min":0,"orientation":"horizontal","style":"IPY_MODEL_c0c648ec0b9d486fab5e42432a1712c4","value":629}},"dd447804de7648a586609ac62013356e":{"model_module":"@jupyter-widgets/controls","model_name":"HTMLModel","model_module_version":"1.5.0","state":{"_dom_classes":[],"_model_module":"@jupyter-widgets/controls","_model_module_version":"1.5.0","_model_name":"HTMLModel","_view_count":null,"_view_module":"@jupyter-widgets/controls","_view_module_version":"1.5.0","_view_name":"HTMLView","description":"","description_tooltip":null,"layout":"IPY_MODEL_a880a8dacd1b4bd6b4570901836086bb","placeholder":"​","style":"IPY_MODEL_86a6cef6a98d46488dabb7fb1fe9045a","value":" 629/629 [00:00&lt;00:00, 23.1kB/s]"}},"1924380db4be4e799452bdfadf797dc6":{"model_module":"@jupyter-widgets/base","model_name":"LayoutModel","model_module_version":"1.2.0","state":{"_model_module":"@jupyter-widgets/base","_model_module_version":"1.2.0","_model_name":"LayoutModel","_view_count":null,"_view_module":"@jupyter-widgets/base","_view_module_version":"1.2.0","_view_name":"LayoutView","align_content":null,"align_items":null,"align_self":null,"border":null,"bottom":null,"display":null,"flex":null,"flex_flow":null,"grid_area":null,"grid_auto_columns":null,"grid_auto_flow":null,"grid_auto_rows":null,"grid_column":null,"grid_gap":null,"grid_row":null,"grid_template_areas":null,"grid_template_columns":null,"grid_template_rows":null,"height":null,"justify_content":null,"justify_items":null,"left":null,"margin":null,"max_height":null,"max_width":null,"min_height":null,"min_width":null,"object_fit":null,"object_position":null,"order":null,"overflow":null,"overflow_x":null,"overflow_y":null,"padding":null,"right":null,"top":null,"visibility":null,"width":null}},"2abf36c673e849f3b240debf6e4e1b18":{"model_module":"@jupyter-widgets/base","model_name":"LayoutModel","model_module_version":"1.2.0","state":{"_model_module":"@jupyter-widgets/base","_model_module_version":"1.2.0","_model_name":"LayoutModel","_view_count":null,"_view_module":"@jupyter-widgets/base","_view_module_version":"1.2.0","_view_name":"LayoutView","align_content":null,"align_items":null,"align_self":null,"border":null,"bottom":null,"display":null,"flex":null,"flex_flow":null,"grid_area":null,"grid_auto_columns":null,"grid_auto_flow":null,"grid_auto_rows":null,"grid_column":null,"grid_gap":null,"grid_row":null,"grid_template_areas":null,"grid_template_columns":null,"grid_template_rows":null,"height":null,"justify_content":null,"justify_items":null,"left":null,"margin":null,"max_height":null,"max_width":null,"min_height":null,"min_width":null,"object_fit":null,"object_position":null,"order":null,"overflow":null,"overflow_x":null,"overflow_y":null,"padding":null,"right":null,"top":null,"visibility":null,"width":null}},"0b9105deb4264a5d885776bd6553320a":{"model_module":"@jupyter-widgets/controls","model_name":"DescriptionStyleModel","model_module_version":"1.5.0","state":{"_model_module":"@jupyter-widgets/controls","_model_module_version":"1.5.0","_model_name":"DescriptionStyleModel","_view_count":null,"_view_module":"@jupyter-widgets/base","_view_module_version":"1.2.0","_view_name":"StyleView","description_width":""}},"7441ff48a8da49228e6d7b684547c5ed":{"model_module":"@jupyter-widgets/base","model_name":"LayoutModel","model_module_version":"1.2.0","state":{"_model_module":"@jupyter-widgets/base","_model_module_version":"1.2.0","_model_name":"LayoutModel","_view_count":null,"_view_module":"@jupyter-widgets/base","_view_module_version":"1.2.0","_view_name":"LayoutView","align_content":null,"align_items":null,"align_self":null,"border":null,"bottom":null,"display":null,"flex":null,"flex_flow":null,"grid_area":null,"grid_auto_columns":null,"grid_auto_flow":null,"grid_auto_rows":null,"grid_column":null,"grid_gap":null,"grid_row":null,"grid_template_areas":null,"grid_template_columns":null,"grid_template_rows":null,"height":null,"justify_content":null,"justify_items":null,"left":null,"margin":null,"max_height":null,"max_width":null,"min_height":null,"min_width":null,"object_fit":null,"object_position":null,"order":null,"overflow":null,"overflow_x":null,"overflow_y":null,"padding":null,"right":null,"top":null,"visibility":null,"width":null}},"c0c648ec0b9d486fab5e42432a1712c4":{"model_module":"@jupyter-widgets/controls","model_name":"ProgressStyleModel","model_module_version":"1.5.0","state":{"_model_module":"@jupyter-widgets/controls","_model_module_version":"1.5.0","_model_name":"ProgressStyleModel","_view_count":null,"_view_module":"@jupyter-widgets/base","_view_module_version":"1.2.0","_view_name":"StyleView","bar_color":null,"description_width":""}},"a880a8dacd1b4bd6b4570901836086bb":{"model_module":"@jupyter-widgets/base","model_name":"LayoutModel","model_module_version":"1.2.0","state":{"_model_module":"@jupyter-widgets/base","_model_module_version":"1.2.0","_model_name":"LayoutModel","_view_count":null,"_view_module":"@jupyter-widgets/base","_view_module_version":"1.2.0","_view_name":"LayoutView","align_content":null,"align_items":null,"align_self":null,"border":null,"bottom":null,"display":null,"flex":null,"flex_flow":null,"grid_area":null,"grid_auto_columns":null,"grid_auto_flow":null,"grid_auto_rows":null,"grid_column":null,"grid_gap":null,"grid_row":null,"grid_template_areas":null,"grid_template_columns":null,"grid_template_rows":null,"height":null,"justify_content":null,"justify_items":null,"left":null,"margin":null,"max_height":null,"max_width":null,"min_height":null,"min_width":null,"object_fit":null,"object_position":null,"order":null,"overflow":null,"overflow_x":null,"overflow_y":null,"padding":null,"right":null,"top":null,"visibility":null,"width":null}},"86a6cef6a98d46488dabb7fb1fe9045a":{"model_module":"@jupyter-widgets/controls","model_name":"DescriptionStyleModel","model_module_version":"1.5.0","state":{"_model_module":"@jupyter-widgets/controls","_model_module_version":"1.5.0","_model_name":"DescriptionStyleModel","_view_count":null,"_view_module":"@jupyter-widgets/base","_view_module_version":"1.2.0","_view_name":"StyleView","description_width":""}},"590a31999c90438c9e69cbbfcea2233d":{"model_module":"@jupyter-widgets/controls","model_name":"HBoxModel","model_module_version":"1.5.0","state":{"_dom_classes":[],"_model_module":"@jupyter-widgets/controls","_model_module_version":"1.5.0","_model_name":"HBoxModel","_view_count":null,"_view_module":"@jupyter-widgets/controls","_view_module_version":"1.5.0","_view_name":"HBoxView","box_style":"","children":["IPY_MODEL_d2556e64342b44de991fb879fcd6219c","IPY_MODEL_99c14f53742e49c785fe875277ae23ab","IPY_MODEL_f83625ef04c5443db271a7174b5ae9dd"],"layout":"IPY_MODEL_8759efc4b83948bcb23f7621343f4f34"}},"d2556e64342b44de991fb879fcd6219c":{"model_module":"@jupyter-widgets/controls","model_name":"HTMLModel","model_module_version":"1.5.0","state":{"_dom_classes":[],"_model_module":"@jupyter-widgets/controls","_model_module_version":"1.5.0","_model_name":"HTMLModel","_view_count":null,"_view_module":"@jupyter-widgets/controls","_view_module_version":"1.5.0","_view_name":"HTMLView","description":"","description_tooltip":null,"layout":"IPY_MODEL_d9d91f4944044aba878b42279d3b2b97","placeholder":"​","style":"IPY_MODEL_b70a9ec678594bbd9cd5ed2fda1d030f","value":"Downloading: 100%"}},"99c14f53742e49c785fe875277ae23ab":{"model_module":"@jupyter-widgets/controls","model_name":"FloatProgressModel","model_module_version":"1.5.0","state":{"_dom_classes":[],"_model_module":"@jupyter-widgets/controls","_model_module_version":"1.5.0","_model_name":"FloatProgressModel","_view_count":null,"_view_module":"@jupyter-widgets/controls","_view_module_version":"1.5.0","_view_name":"ProgressView","bar_style":"success","description":"","description_tooltip":null,"layout":"IPY_MODEL_4bffce8254454032b6bf03721470c548","max":267844284,"min":0,"orientation":"horizontal","style":"IPY_MODEL_a353160f508548b6a3325d45e2f54fdd","value":267844284}},"f83625ef04c5443db271a7174b5ae9dd":{"model_module":"@jupyter-widgets/controls","model_name":"HTMLModel","model_module_version":"1.5.0","state":{"_dom_classes":[],"_model_module":"@jupyter-widgets/controls","_model_module_version":"1.5.0","_model_name":"HTMLModel","_view_count":null,"_view_module":"@jupyter-widgets/controls","_view_module_version":"1.5.0","_view_name":"HTMLView","description":"","description_tooltip":null,"layout":"IPY_MODEL_0dd28c9863f44c20a51cfef37c08adb1","placeholder":"​","style":"IPY_MODEL_2ae91f43a6ba4da9b28464591b4c3a12","value":" 268M/268M [00:04&lt;00:00, 70.3MB/s]"}},"8759efc4b83948bcb23f7621343f4f34":{"model_module":"@jupyter-widgets/base","model_name":"LayoutModel","model_module_version":"1.2.0","state":{"_model_module":"@jupyter-widgets/base","_model_module_version":"1.2.0","_model_name":"LayoutModel","_view_count":null,"_view_module":"@jupyter-widgets/base","_view_module_version":"1.2.0","_view_name":"LayoutView","align_content":null,"align_items":null,"align_self":null,"border":null,"bottom":null,"display":null,"flex":null,"flex_flow":null,"grid_area":null,"grid_auto_columns":null,"grid_auto_flow":null,"grid_auto_rows":null,"grid_column":null,"grid_gap":null,"grid_row":null,"grid_template_areas":null,"grid_template_columns":null,"grid_template_rows":null,"height":null,"justify_content":null,"justify_items":null,"left":null,"margin":null,"max_height":null,"max_width":null,"min_height":null,"min_width":null,"object_fit":null,"object_position":null,"order":null,"overflow":null,"overflow_x":null,"overflow_y":null,"padding":null,"right":null,"top":null,"visibility":null,"width":null}},"d9d91f4944044aba878b42279d3b2b97":{"model_module":"@jupyter-widgets/base","model_name":"LayoutModel","model_module_version":"1.2.0","state":{"_model_module":"@jupyter-widgets/base","_model_module_version":"1.2.0","_model_name":"LayoutModel","_view_count":null,"_view_module":"@jupyter-widgets/base","_view_module_version":"1.2.0","_view_name":"LayoutView","align_content":null,"align_items":null,"align_self":null,"border":null,"bottom":null,"display":null,"flex":null,"flex_flow":null,"grid_area":null,"grid_auto_columns":null,"grid_auto_flow":null,"grid_auto_rows":null,"grid_column":null,"grid_gap":null,"grid_row":null,"grid_template_areas":null,"grid_template_columns":null,"grid_template_rows":null,"height":null,"justify_content":null,"justify_items":null,"left":null,"margin":null,"max_height":null,"max_width":null,"min_height":null,"min_width":null,"object_fit":null,"object_position":null,"order":null,"overflow":null,"overflow_x":null,"overflow_y":null,"padding":null,"right":null,"top":null,"visibility":null,"width":null}},"b70a9ec678594bbd9cd5ed2fda1d030f":{"model_module":"@jupyter-widgets/controls","model_name":"DescriptionStyleModel","model_module_version":"1.5.0","state":{"_model_module":"@jupyter-widgets/controls","_model_module_version":"1.5.0","_model_name":"DescriptionStyleModel","_view_count":null,"_view_module":"@jupyter-widgets/base","_view_module_version":"1.2.0","_view_name":"StyleView","description_width":""}},"4bffce8254454032b6bf03721470c548":{"model_module":"@jupyter-widgets/base","model_name":"LayoutModel","model_module_version":"1.2.0","state":{"_model_module":"@jupyter-widgets/base","_model_module_version":"1.2.0","_model_name":"LayoutModel","_view_count":null,"_view_module":"@jupyter-widgets/base","_view_module_version":"1.2.0","_view_name":"LayoutView","align_content":null,"align_items":null,"align_self":null,"border":null,"bottom":null,"display":null,"flex":null,"flex_flow":null,"grid_area":null,"grid_auto_columns":null,"grid_auto_flow":null,"grid_auto_rows":null,"grid_column":null,"grid_gap":null,"grid_row":null,"grid_template_areas":null,"grid_template_columns":null,"grid_template_rows":null,"height":null,"justify_content":null,"justify_items":null,"left":null,"margin":null,"max_height":null,"max_width":null,"min_height":null,"min_width":null,"object_fit":null,"object_position":null,"order":null,"overflow":null,"overflow_x":null,"overflow_y":null,"padding":null,"right":null,"top":null,"visibility":null,"width":null}},"a353160f508548b6a3325d45e2f54fdd":{"model_module":"@jupyter-widgets/controls","model_name":"ProgressStyleModel","model_module_version":"1.5.0","state":{"_model_module":"@jupyter-widgets/controls","_model_module_version":"1.5.0","_model_name":"ProgressStyleModel","_view_count":null,"_view_module":"@jupyter-widgets/base","_view_module_version":"1.2.0","_view_name":"StyleView","bar_color":null,"description_width":""}},"0dd28c9863f44c20a51cfef37c08adb1":{"model_module":"@jupyter-widgets/base","model_name":"LayoutModel","model_module_version":"1.2.0","state":{"_model_module":"@jupyter-widgets/base","_model_module_version":"1.2.0","_model_name":"LayoutModel","_view_count":null,"_view_module":"@jupyter-widgets/base","_view_module_version":"1.2.0","_view_name":"LayoutView","align_content":null,"align_items":null,"align_self":null,"border":null,"bottom":null,"display":null,"flex":null,"flex_flow":null,"grid_area":null,"grid_auto_columns":null,"grid_auto_flow":null,"grid_auto_rows":null,"grid_column":null,"grid_gap":null,"grid_row":null,"grid_template_areas":null,"grid_template_columns":null,"grid_template_rows":null,"height":null,"justify_content":null,"justify_items":null,"left":null,"margin":null,"max_height":null,"max_width":null,"min_height":null,"min_width":null,"object_fit":null,"object_position":null,"order":null,"overflow":null,"overflow_x":null,"overflow_y":null,"padding":null,"right":null,"top":null,"visibility":null,"width":null}},"2ae91f43a6ba4da9b28464591b4c3a12":{"model_module":"@jupyter-widgets/controls","model_name":"DescriptionStyleModel","model_module_version":"1.5.0","state":{"_model_module":"@jupyter-widgets/controls","_model_module_version":"1.5.0","_model_name":"DescriptionStyleModel","_view_count":null,"_view_module":"@jupyter-widgets/base","_view_module_version":"1.2.0","_view_name":"StyleView","description_width":""}},"78ca6c3562ba4a92a2927e006c70d06b":{"model_module":"@jupyter-widgets/controls","model_name":"HBoxModel","model_module_version":"1.5.0","state":{"_dom_classes":[],"_model_module":"@jupyter-widgets/controls","_model_module_version":"1.5.0","_model_name":"HBoxModel","_view_count":null,"_view_module":"@jupyter-widgets/controls","_view_module_version":"1.5.0","_view_name":"HBoxView","box_style":"","children":["IPY_MODEL_3d241069d94f4cc3a4ace9f86784a64c","IPY_MODEL_662056c4703645f9908791f663af0b6f","IPY_MODEL_bbe7bbeec2e54a4ab36a959d24bc4ee7"],"layout":"IPY_MODEL_df0f95bd67274a8abf6df03c26d1b4f7"}},"3d241069d94f4cc3a4ace9f86784a64c":{"model_module":"@jupyter-widgets/controls","model_name":"HTMLModel","model_module_version":"1.5.0","state":{"_dom_classes":[],"_model_module":"@jupyter-widgets/controls","_model_module_version":"1.5.0","_model_name":"HTMLModel","_view_count":null,"_view_module":"@jupyter-widgets/controls","_view_module_version":"1.5.0","_view_name":"HTMLView","description":"","description_tooltip":null,"layout":"IPY_MODEL_1d0d9cc3704c418693ed87f57be340c2","placeholder":"​","style":"IPY_MODEL_ac43b2a76ccb4dc2955fa4f8ceb4f62d","value":"Downloading: 100%"}},"662056c4703645f9908791f663af0b6f":{"model_module":"@jupyter-widgets/controls","model_name":"FloatProgressModel","model_module_version":"1.5.0","state":{"_dom_classes":[],"_model_module":"@jupyter-widgets/controls","_model_module_version":"1.5.0","_model_name":"FloatProgressModel","_view_count":null,"_view_module":"@jupyter-widgets/controls","_view_module_version":"1.5.0","_view_name":"ProgressView","bar_style":"success","description":"","description_tooltip":null,"layout":"IPY_MODEL_de40d6a274654e0087596a94b141d839","max":48,"min":0,"orientation":"horizontal","style":"IPY_MODEL_33ee9b5c41084222b4af3478c6a1bb88","value":48}},"bbe7bbeec2e54a4ab36a959d24bc4ee7":{"model_module":"@jupyter-widgets/controls","model_name":"HTMLModel","model_module_version":"1.5.0","state":{"_dom_classes":[],"_model_module":"@jupyter-widgets/controls","_model_module_version":"1.5.0","_model_name":"HTMLModel","_view_count":null,"_view_module":"@jupyter-widgets/controls","_view_module_version":"1.5.0","_view_name":"HTMLView","description":"","description_tooltip":null,"layout":"IPY_MODEL_2e8212600eda43aaa01cde98bc866b0b","placeholder":"​","style":"IPY_MODEL_36f6ff0085a449bb8f40380399b81bbb","value":" 48.0/48.0 [00:00&lt;00:00, 644B/s]"}},"df0f95bd67274a8abf6df03c26d1b4f7":{"model_module":"@jupyter-widgets/base","model_name":"LayoutModel","model_module_version":"1.2.0","state":{"_model_module":"@jupyter-widgets/base","_model_module_version":"1.2.0","_model_name":"LayoutModel","_view_count":null,"_view_module":"@jupyter-widgets/base","_view_module_version":"1.2.0","_view_name":"LayoutView","align_content":null,"align_items":null,"align_self":null,"border":null,"bottom":null,"display":null,"flex":null,"flex_flow":null,"grid_area":null,"grid_auto_columns":null,"grid_auto_flow":null,"grid_auto_rows":null,"grid_column":null,"grid_gap":null,"grid_row":null,"grid_template_areas":null,"grid_template_columns":null,"grid_template_rows":null,"height":null,"justify_content":null,"justify_items":null,"left":null,"margin":null,"max_height":null,"max_width":null,"min_height":null,"min_width":null,"object_fit":null,"object_position":null,"order":null,"overflow":null,"overflow_x":null,"overflow_y":null,"padding":null,"right":null,"top":null,"visibility":null,"width":null}},"1d0d9cc3704c418693ed87f57be340c2":{"model_module":"@jupyter-widgets/base","model_name":"LayoutModel","model_module_version":"1.2.0","state":{"_model_module":"@jupyter-widgets/base","_model_module_version":"1.2.0","_model_name":"LayoutModel","_view_count":null,"_view_module":"@jupyter-widgets/base","_view_module_version":"1.2.0","_view_name":"LayoutView","align_content":null,"align_items":null,"align_self":null,"border":null,"bottom":null,"display":null,"flex":null,"flex_flow":null,"grid_area":null,"grid_auto_columns":null,"grid_auto_flow":null,"grid_auto_rows":null,"grid_column":null,"grid_gap":null,"grid_row":null,"grid_template_areas":null,"grid_template_columns":null,"grid_template_rows":null,"height":null,"justify_content":null,"justify_items":null,"left":null,"margin":null,"max_height":null,"max_width":null,"min_height":null,"min_width":null,"object_fit":null,"object_position":null,"order":null,"overflow":null,"overflow_x":null,"overflow_y":null,"padding":null,"right":null,"top":null,"visibility":null,"width":null}},"ac43b2a76ccb4dc2955fa4f8ceb4f62d":{"model_module":"@jupyter-widgets/controls","model_name":"DescriptionStyleModel","model_module_version":"1.5.0","state":{"_model_module":"@jupyter-widgets/controls","_model_module_version":"1.5.0","_model_name":"DescriptionStyleModel","_view_count":null,"_view_module":"@jupyter-widgets/base","_view_module_version":"1.2.0","_view_name":"StyleView","description_width":""}},"de40d6a274654e0087596a94b141d839":{"model_module":"@jupyter-widgets/base","model_name":"LayoutModel","model_module_version":"1.2.0","state":{"_model_module":"@jupyter-widgets/base","_model_module_version":"1.2.0","_model_name":"LayoutModel","_view_count":null,"_view_module":"@jupyter-widgets/base","_view_module_version":"1.2.0","_view_name":"LayoutView","align_content":null,"align_items":null,"align_self":null,"border":null,"bottom":null,"display":null,"flex":null,"flex_flow":null,"grid_area":null,"grid_auto_columns":null,"grid_auto_flow":null,"grid_auto_rows":null,"grid_column":null,"grid_gap":null,"grid_row":null,"grid_template_areas":null,"grid_template_columns":null,"grid_template_rows":null,"height":null,"justify_content":null,"justify_items":null,"left":null,"margin":null,"max_height":null,"max_width":null,"min_height":null,"min_width":null,"object_fit":null,"object_position":null,"order":null,"overflow":null,"overflow_x":null,"overflow_y":null,"padding":null,"right":null,"top":null,"visibility":null,"width":null}},"33ee9b5c41084222b4af3478c6a1bb88":{"model_module":"@jupyter-widgets/controls","model_name":"ProgressStyleModel","model_module_version":"1.5.0","state":{"_model_module":"@jupyter-widgets/controls","_model_module_version":"1.5.0","_model_name":"ProgressStyleModel","_view_count":null,"_view_module":"@jupyter-widgets/base","_view_module_version":"1.2.0","_view_name":"StyleView","bar_color":null,"description_width":""}},"2e8212600eda43aaa01cde98bc866b0b":{"model_module":"@jupyter-widgets/base","model_name":"LayoutModel","model_module_version":"1.2.0","state":{"_model_module":"@jupyter-widgets/base","_model_module_version":"1.2.0","_model_name":"LayoutModel","_view_count":null,"_view_module":"@jupyter-widgets/base","_view_module_version":"1.2.0","_view_name":"LayoutView","align_content":null,"align_items":null,"align_self":null,"border":null,"bottom":null,"display":null,"flex":null,"flex_flow":null,"grid_area":null,"grid_auto_columns":null,"grid_auto_flow":null,"grid_auto_rows":null,"grid_column":null,"grid_gap":null,"grid_row":null,"grid_template_areas":null,"grid_template_columns":null,"grid_template_rows":null,"height":null,"justify_content":null,"justify_items":null,"left":null,"margin":null,"max_height":null,"max_width":null,"min_height":null,"min_width":null,"object_fit":null,"object_position":null,"order":null,"overflow":null,"overflow_x":null,"overflow_y":null,"padding":null,"right":null,"top":null,"visibility":null,"width":null}},"36f6ff0085a449bb8f40380399b81bbb":{"model_module":"@jupyter-widgets/controls","model_name":"DescriptionStyleModel","model_module_version":"1.5.0","state":{"_model_module":"@jupyter-widgets/controls","_model_module_version":"1.5.0","_model_name":"DescriptionStyleModel","_view_count":null,"_view_module":"@jupyter-widgets/base","_view_module_version":"1.2.0","_view_name":"StyleView","description_width":""}},"98f6605e3dc64a1f9f891c5ed8a53972":{"model_module":"@jupyter-widgets/controls","model_name":"HBoxModel","model_module_version":"1.5.0","state":{"_dom_classes":[],"_model_module":"@jupyter-widgets/controls","_model_module_version":"1.5.0","_model_name":"HBoxModel","_view_count":null,"_view_module":"@jupyter-widgets/controls","_view_module_version":"1.5.0","_view_name":"HBoxView","box_style":"","children":["IPY_MODEL_d808a9fcd39549169d33668258f5d4d2","IPY_MODEL_1a332fe627f1408885694bc84077e51e","IPY_MODEL_a5177e1b459c42bb81703e8009457192"],"layout":"IPY_MODEL_dfcef76abc2844ff9013e8ace449f51c"}},"d808a9fcd39549169d33668258f5d4d2":{"model_module":"@jupyter-widgets/controls","model_name":"HTMLModel","model_module_version":"1.5.0","state":{"_dom_classes":[],"_model_module":"@jupyter-widgets/controls","_model_module_version":"1.5.0","_model_name":"HTMLModel","_view_count":null,"_view_module":"@jupyter-widgets/controls","_view_module_version":"1.5.0","_view_name":"HTMLView","description":"","description_tooltip":null,"layout":"IPY_MODEL_3c232f277d28441ca831f5923313e8ae","placeholder":"​","style":"IPY_MODEL_05049dc5417a47bdbc623d347e07f696","value":"Downloading: 100%"}},"1a332fe627f1408885694bc84077e51e":{"model_module":"@jupyter-widgets/controls","model_name":"FloatProgressModel","model_module_version":"1.5.0","state":{"_dom_classes":[],"_model_module":"@jupyter-widgets/controls","_model_module_version":"1.5.0","_model_name":"FloatProgressModel","_view_count":null,"_view_module":"@jupyter-widgets/controls","_view_module_version":"1.5.0","_view_name":"ProgressView","bar_style":"success","description":"","description_tooltip":null,"layout":"IPY_MODEL_42771455b0434f628f59eb6a3730f955","max":231508,"min":0,"orientation":"horizontal","style":"IPY_MODEL_d5fee0522cb44dafa3034104b0cf82b2","value":231508}},"a5177e1b459c42bb81703e8009457192":{"model_module":"@jupyter-widgets/controls","model_name":"HTMLModel","model_module_version":"1.5.0","state":{"_dom_classes":[],"_model_module":"@jupyter-widgets/controls","_model_module_version":"1.5.0","_model_name":"HTMLModel","_view_count":null,"_view_module":"@jupyter-widgets/controls","_view_module_version":"1.5.0","_view_name":"HTMLView","description":"","description_tooltip":null,"layout":"IPY_MODEL_c6b1edeef02147f598353204d928553d","placeholder":"​","style":"IPY_MODEL_9c7108c7836845c7bbc154b707af0932","value":" 232k/232k [00:00&lt;00:00, 388kB/s]"}},"dfcef76abc2844ff9013e8ace449f51c":{"model_module":"@jupyter-widgets/base","model_name":"LayoutModel","model_module_version":"1.2.0","state":{"_model_module":"@jupyter-widgets/base","_model_module_version":"1.2.0","_model_name":"LayoutModel","_view_count":null,"_view_module":"@jupyter-widgets/base","_view_module_version":"1.2.0","_view_name":"LayoutView","align_content":null,"align_items":null,"align_self":null,"border":null,"bottom":null,"display":null,"flex":null,"flex_flow":null,"grid_area":null,"grid_auto_columns":null,"grid_auto_flow":null,"grid_auto_rows":null,"grid_column":null,"grid_gap":null,"grid_row":null,"grid_template_areas":null,"grid_template_columns":null,"grid_template_rows":null,"height":null,"justify_content":null,"justify_items":null,"left":null,"margin":null,"max_height":null,"max_width":null,"min_height":null,"min_width":null,"object_fit":null,"object_position":null,"order":null,"overflow":null,"overflow_x":null,"overflow_y":null,"padding":null,"right":null,"top":null,"visibility":null,"width":null}},"3c232f277d28441ca831f5923313e8ae":{"model_module":"@jupyter-widgets/base","model_name":"LayoutModel","model_module_version":"1.2.0","state":{"_model_module":"@jupyter-widgets/base","_model_module_version":"1.2.0","_model_name":"LayoutModel","_view_count":null,"_view_module":"@jupyter-widgets/base","_view_module_version":"1.2.0","_view_name":"LayoutView","align_content":null,"align_items":null,"align_self":null,"border":null,"bottom":null,"display":null,"flex":null,"flex_flow":null,"grid_area":null,"grid_auto_columns":null,"grid_auto_flow":null,"grid_auto_rows":null,"grid_column":null,"grid_gap":null,"grid_row":null,"grid_template_areas":null,"grid_template_columns":null,"grid_template_rows":null,"height":null,"justify_content":null,"justify_items":null,"left":null,"margin":null,"max_height":null,"max_width":null,"min_height":null,"min_width":null,"object_fit":null,"object_position":null,"order":null,"overflow":null,"overflow_x":null,"overflow_y":null,"padding":null,"right":null,"top":null,"visibility":null,"width":null}},"05049dc5417a47bdbc623d347e07f696":{"model_module":"@jupyter-widgets/controls","model_name":"DescriptionStyleModel","model_module_version":"1.5.0","state":{"_model_module":"@jupyter-widgets/controls","_model_module_version":"1.5.0","_model_name":"DescriptionStyleModel","_view_count":null,"_view_module":"@jupyter-widgets/base","_view_module_version":"1.2.0","_view_name":"StyleView","description_width":""}},"42771455b0434f628f59eb6a3730f955":{"model_module":"@jupyter-widgets/base","model_name":"LayoutModel","model_module_version":"1.2.0","state":{"_model_module":"@jupyter-widgets/base","_model_module_version":"1.2.0","_model_name":"LayoutModel","_view_count":null,"_view_module":"@jupyter-widgets/base","_view_module_version":"1.2.0","_view_name":"LayoutView","align_content":null,"align_items":null,"align_self":null,"border":null,"bottom":null,"display":null,"flex":null,"flex_flow":null,"grid_area":null,"grid_auto_columns":null,"grid_auto_flow":null,"grid_auto_rows":null,"grid_column":null,"grid_gap":null,"grid_row":null,"grid_template_areas":null,"grid_template_columns":null,"grid_template_rows":null,"height":null,"justify_content":null,"justify_items":null,"left":null,"margin":null,"max_height":null,"max_width":null,"min_height":null,"min_width":null,"object_fit":null,"object_position":null,"order":null,"overflow":null,"overflow_x":null,"overflow_y":null,"padding":null,"right":null,"top":null,"visibility":null,"width":null}},"d5fee0522cb44dafa3034104b0cf82b2":{"model_module":"@jupyter-widgets/controls","model_name":"ProgressStyleModel","model_module_version":"1.5.0","state":{"_model_module":"@jupyter-widgets/controls","_model_module_version":"1.5.0","_model_name":"ProgressStyleModel","_view_count":null,"_view_module":"@jupyter-widgets/base","_view_module_version":"1.2.0","_view_name":"StyleView","bar_color":null,"description_width":""}},"c6b1edeef02147f598353204d928553d":{"model_module":"@jupyter-widgets/base","model_name":"LayoutModel","model_module_version":"1.2.0","state":{"_model_module":"@jupyter-widgets/base","_model_module_version":"1.2.0","_model_name":"LayoutModel","_view_count":null,"_view_module":"@jupyter-widgets/base","_view_module_version":"1.2.0","_view_name":"LayoutView","align_content":null,"align_items":null,"align_self":null,"border":null,"bottom":null,"display":null,"flex":null,"flex_flow":null,"grid_area":null,"grid_auto_columns":null,"grid_auto_flow":null,"grid_auto_rows":null,"grid_column":null,"grid_gap":null,"grid_row":null,"grid_template_areas":null,"grid_template_columns":null,"grid_template_rows":null,"height":null,"justify_content":null,"justify_items":null,"left":null,"margin":null,"max_height":null,"max_width":null,"min_height":null,"min_width":null,"object_fit":null,"object_position":null,"order":null,"overflow":null,"overflow_x":null,"overflow_y":null,"padding":null,"right":null,"top":null,"visibility":null,"width":null}},"9c7108c7836845c7bbc154b707af0932":{"model_module":"@jupyter-widgets/controls","model_name":"DescriptionStyleModel","model_module_version":"1.5.0","state":{"_model_module":"@jupyter-widgets/controls","_model_module_version":"1.5.0","_model_name":"DescriptionStyleModel","_view_count":null,"_view_module":"@jupyter-widgets/base","_view_module_version":"1.2.0","_view_name":"StyleView","description_width":""}}}}},"cells":[{"cell_type":"markdown","source":["\n","\n","#  Lib installation \n"],"metadata":{"id":"IFvT470NvqWa"}},{"cell_type":"code","source":["pip install gensim\n"],"metadata":{"id":"-W6C1CgPC4C0"},"execution_count":null,"outputs":[]},{"cell_type":"code","source":["pip install demoji"],"metadata":{"id":"Zj_fZTLzG0p-"},"execution_count":null,"outputs":[]},{"cell_type":"code","source":["pip install emoji"],"metadata":{"id":"qCL8Ps2iZBCL"},"execution_count":null,"outputs":[]},{"cell_type":"code","source":["pip install pyLDAvis"],"metadata":{"id":"CQNTFNtc0X5s"},"execution_count":null,"outputs":[]},{"cell_type":"code","source":["pip install textblob"],"metadata":{"id":"lT2N9n028iH7"},"execution_count":null,"outputs":[]},{"cell_type":"code","source":["pip install spellchecker"],"metadata":{"id":"ZZDIGZ8R8vpT"},"execution_count":null,"outputs":[]},{"cell_type":"code","source":["pip install spellchecker"],"metadata":{"id":"9e3DrKqvFj7e"},"execution_count":null,"outputs":[]},{"cell_type":"code","source":["pip install pyspellchecker==0.5.6"],"metadata":{"id":"_VcWt6Bx37hZ"},"execution_count":null,"outputs":[]},{"cell_type":"code","source":["pip install transformers"],"metadata":{"id":"wtRPY7JHLdZL"},"execution_count":null,"outputs":[]},{"cell_type":"code","source":["import pandas as pd\n","import matplotlib.pyplot as plt\n","import nltk; \n","nltk.download('stopwords')\n","nltk.download('punkt')\n","import re\n","import numpy as np\n","import pandas as pd\n","from pprint import pprint\n","# Gensim\n","import gensim\n","import gensim.corpora as corpora\n","from gensim.utils import simple_preprocess\n","from gensim.models import CoherenceModel\n","# spacy for lemmatization\n","import spacy\n","# Plotting tools\n","import pyLDAvis\n","import pyLDAvis.gensim_models\n","import matplotlib.pyplot as plt\n","from textblob import TextBlob\n","from textblob import Word\n","from nltk.tokenize import word_tokenize\n","# %matplotlib inline\n","import emoji\n","import numpy as np\n","from sklearn.model_selection import train_test_split\n","\n","# import textblob\n","# from spellchecker import SpellChecker\n","\n","# Enable logging for gensim - optional\n","import logging\n","logging.basicConfig(format='%(asctime)s : %(levelname)s : %(message)s', level=logging.ERROR)\n","import warnings\n","warnings.filterwarnings(\"ignore\",category=DeprecationWarning)\n","from transformers import pipeline\n","import re\n","import emoji\n","\n","import numpy as np # linear algebra\n","import pandas as pd # data processing, CSV file I/O (e.g. pd.read_csv)\n","import matplotlib.pyplot as plt # for data visualization purposes\n","import seaborn as sns # for statistical data visualization\n","%matplotlib inline\n","\n","from sklearn.naive_bayes import GaussianNB\n","\n","from sklearn.metrics import confusion_matrix"],"metadata":{"id":"iXcV8wyFwyPE"},"execution_count":null,"outputs":[]},{"cell_type":"code","source":["# Imported Libraries\n","\n","import numpy as np # linear algebra\n","import pandas as pd # data processing, CSV file I/O (e.g. pd.read_csv)\n","import tensorflow as tf\n","import matplotlib.pyplot as plt\n","import seaborn as sns\n","from sklearn.manifold import TSNE\n","from sklearn.decomposition import PCA, TruncatedSVD\n","import matplotlib.patches as mpatches\n","import time\n","\n","# Classifier Libraries\n","from sklearn.linear_model import LogisticRegression\n","from sklearn.svm import SVC\n","from sklearn.neighbors import KNeighborsClassifier\n","from sklearn.tree import DecisionTreeClassifier\n","from sklearn.ensemble import RandomForestClassifier\n","import collections\n","\n","\n","# Other Libraries\n","from sklearn.model_selection import train_test_split\n","from sklearn.pipeline import make_pipeline\n","from imblearn.pipeline import make_pipeline as imbalanced_make_pipeline\n","from imblearn.over_sampling import SMOTE\n","from imblearn.under_sampling import NearMiss\n","from imblearn.metrics import classification_report_imbalanced\n","from sklearn.metrics import precision_score, recall_score, f1_score, roc_auc_score, accuracy_score, classification_report\n","from collections import Counter\n","from sklearn.model_selection import KFold, StratifiedKFold\n","import warnings\n","warnings.filterwarnings(\"ignore\")"],"metadata":{"id":"26MZueqzP6EJ","executionInfo":{"status":"ok","timestamp":1674571659282,"user_tz":-60,"elapsed":514,"user":{"displayName":"Лиза Ганнич","userId":"05440454907585696632"}}},"execution_count":76,"outputs":[]},{"cell_type":"code","source":["!python3 -m spacy download en"],"metadata":{"id":"5aryMaXnCetF"},"execution_count":null,"outputs":[]},{"cell_type":"code","source":["spacy.load('en_core_web_sm')"],"metadata":{"id":"TYBm6omcIFRe"},"execution_count":null,"outputs":[]},{"cell_type":"markdown","source":["#Descriptive statistics\n"],"metadata":{"id":"WnL3Zru8RXVW"}},{"cell_type":"code","source":["url = '/content/drive/MyDrive/Data_Science /NLP_Beginning/english_comments_uklon_1.csv'\n","df = pd.read_csv(url)\n","df.head(1)"],"metadata":{"id":"LuwDc9sgvwWF"},"execution_count":null,"outputs":[]},{"cell_type":"code","source":["df.columns\n"],"metadata":{"colab":{"base_uri":"https://localhost:8080/"},"id":"nRzN6b2oxC4u","executionInfo":{"status":"ok","timestamp":1674570593154,"user_tz":-60,"elapsed":12,"user":{"displayName":"Лиза Ганнич","userId":"05440454907585696632"}},"outputId":"52ede1c0-d2ce-4b68-dbb8-6b0fd5bfbd5f"},"execution_count":25,"outputs":[{"output_type":"execute_result","data":{"text/plain":["Index(['order_id', 'feedback_id', 'rider_id', 'driver_id', 'created_at',\n","       'region_id', 'mark', 'custom_comment', 'critical'],\n","      dtype='object')"]},"metadata":{},"execution_count":25}]},{"cell_type":"code","source":["# Visualization\n","# Pieplot by rating"],"metadata":{"id":"nhLOrQIUxUsa","executionInfo":{"status":"ok","timestamp":1674570593155,"user_tz":-60,"elapsed":9,"user":{"displayName":"Лиза Ганнич","userId":"05440454907585696632"}}},"execution_count":26,"outputs":[]},{"cell_type":"code","source":["label=['1', '2','3', '4', '5']\n","plt.pie(df.groupby('mark')['mark'].count(),autopct=\"%.1f%%\",labels=label)\n","plt.show()"],"metadata":{"colab":{"base_uri":"https://localhost:8080/","height":248},"id":"fr1YbTIPxY-4","executionInfo":{"status":"ok","timestamp":1674570593155,"user_tz":-60,"elapsed":9,"user":{"displayName":"Лиза Ганнич","userId":"05440454907585696632"}},"outputId":"7f7708c4-23c7-405c-8695-a9bf80a726c2"},"execution_count":27,"outputs":[{"output_type":"display_data","data":{"text/plain":["<Figure size 432x288 with 1 Axes>"],"image/png":"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\n"},"metadata":{}}]},{"cell_type":"code","source":["# 59.2% of feedback have low marks (1-2)"],"metadata":{"id":"xJ6JGPj6xp28","executionInfo":{"status":"ok","timestamp":1674570593156,"user_tz":-60,"elapsed":9,"user":{"displayName":"Лиза Ганнич","userId":"05440454907585696632"}}},"execution_count":28,"outputs":[]},{"cell_type":"code","source":["# TODO region and average mark\n","sns.set_theme(style=\"ticks\", palette=\"pastel\")\n","\n","# Load the example tips dataset\n","tips = sns.load_dataset(\"tips\")\n","\n","# Draw a nested boxplot to show bills by day and time\n","sns.boxplot(x=\"region_id\", y=\"mark\",\n","                         data=df)\n","sns.despine(offset=10, trim=True)"],"metadata":{"colab":{"base_uri":"https://localhost:8080/","height":295},"id":"pNrvmvDQy1D5","executionInfo":{"status":"ok","timestamp":1674570595257,"user_tz":-60,"elapsed":2109,"user":{"displayName":"Лиза Ганнич","userId":"05440454907585696632"}},"outputId":"eedd2ec6-00b4-40fc-f135-76d0af697e62"},"execution_count":29,"outputs":[{"output_type":"display_data","data":{"text/plain":["<Figure size 432x288 with 1 Axes>"],"image/png":"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\n"},"metadata":{}}]},{"cell_type":"code","source":["df.groupby('region_id').agg(median=('mark','median'),\n","                            mean=('mark','mean'),\n","                       count=('mark','count')).reset_index().sort_values('median')"],"metadata":{"colab":{"base_uri":"https://localhost:8080/","height":927},"id":"lvoNdQy-0jQT","executionInfo":{"status":"ok","timestamp":1674570595258,"user_tz":-60,"elapsed":12,"user":{"displayName":"Лиза Ганнич","userId":"05440454907585696632"}},"outputId":"aec517f4-b117-4bbf-d4cd-95c40ad750f5"},"execution_count":30,"outputs":[{"output_type":"execute_result","data":{"text/plain":["    region_id  median      mean  count\n","13         14     1.0  2.333333     15\n","18         19     1.0  2.333333    330\n","2           3     1.0  1.922053    526\n","3           4     1.0  2.220930    344\n","15         16     1.0  2.333333     30\n","5           6     1.0  1.947977    173\n","14         15     1.0  2.344828     29\n","9          10     1.0  2.250000     16\n","12         13     2.0  2.443038     79\n","11         12     2.0  2.468966    145\n","0           1     2.0  2.500708   2826\n","6           7     2.0  2.754386    114\n","4           5     2.0  2.660377    424\n","1           2     2.0  2.500000    262\n","10         11     2.0  2.559633    109\n","8           9     3.0  2.777778     27\n","7           8     3.0  3.285714      7\n","24         25     3.0  3.250000     12\n","25         26     4.0  3.666667     12\n","16         17     4.0  3.444444      9\n","20         21     4.0  3.263158     38\n","23         24     5.0  3.722222     18\n","19         20     5.0  4.500000      6\n","21         22     5.0  3.571429      7\n","17         18     5.0  3.755556     45\n","26         28     5.0  5.000000      2\n","22         23     5.0  3.727273     11\n","27        100     5.0  3.447368     38"],"text/html":["\n","  <div id=\"df-e1db9adb-41c9-4722-ac82-d4885f64d474\">\n","    <div class=\"colab-df-container\">\n","      <div>\n","<style scoped>\n","    .dataframe tbody tr th:only-of-type {\n","        vertical-align: middle;\n","    }\n","\n","    .dataframe tbody tr th {\n","        vertical-align: top;\n","    }\n","\n","    .dataframe thead th {\n","        text-align: right;\n","    }\n","</style>\n","<table border=\"1\" class=\"dataframe\">\n","  <thead>\n","    <tr style=\"text-align: right;\">\n","      <th></th>\n","      <th>region_id</th>\n","      <th>median</th>\n","      <th>mean</th>\n","      <th>count</th>\n","    </tr>\n","  </thead>\n","  <tbody>\n","    <tr>\n","      <th>13</th>\n","      <td>14</td>\n","      <td>1.0</td>\n","      <td>2.333333</td>\n","      <td>15</td>\n","    </tr>\n","    <tr>\n","      <th>18</th>\n","      <td>19</td>\n","      <td>1.0</td>\n","      <td>2.333333</td>\n","      <td>330</td>\n","    </tr>\n","    <tr>\n","      <th>2</th>\n","      <td>3</td>\n","      <td>1.0</td>\n","      <td>1.922053</td>\n","      <td>526</td>\n","    </tr>\n","    <tr>\n","      <th>3</th>\n","      <td>4</td>\n","      <td>1.0</td>\n","      <td>2.220930</td>\n","      <td>344</td>\n","    </tr>\n","    <tr>\n","      <th>15</th>\n","      <td>16</td>\n","      <td>1.0</td>\n","      <td>2.333333</td>\n","      <td>30</td>\n","    </tr>\n","    <tr>\n","      <th>5</th>\n","      <td>6</td>\n","      <td>1.0</td>\n","      <td>1.947977</td>\n","      <td>173</td>\n","    </tr>\n","    <tr>\n","      <th>14</th>\n","      <td>15</td>\n","      <td>1.0</td>\n","      <td>2.344828</td>\n","      <td>29</td>\n","    </tr>\n","    <tr>\n","      <th>9</th>\n","      <td>10</td>\n","      <td>1.0</td>\n","      <td>2.250000</td>\n","      <td>16</td>\n","    </tr>\n","    <tr>\n","      <th>12</th>\n","      <td>13</td>\n","      <td>2.0</td>\n","      <td>2.443038</td>\n","      <td>79</td>\n","    </tr>\n","    <tr>\n","      <th>11</th>\n","      <td>12</td>\n","      <td>2.0</td>\n","      <td>2.468966</td>\n","      <td>145</td>\n","    </tr>\n","    <tr>\n","      <th>0</th>\n","      <td>1</td>\n","      <td>2.0</td>\n","      <td>2.500708</td>\n","      <td>2826</td>\n","    </tr>\n","    <tr>\n","      <th>6</th>\n","      <td>7</td>\n","      <td>2.0</td>\n","      <td>2.754386</td>\n","      <td>114</td>\n","    </tr>\n","    <tr>\n","      <th>4</th>\n","      <td>5</td>\n","      <td>2.0</td>\n","      <td>2.660377</td>\n","      <td>424</td>\n","    </tr>\n","    <tr>\n","      <th>1</th>\n","      <td>2</td>\n","      <td>2.0</td>\n","      <td>2.500000</td>\n","      <td>262</td>\n","    </tr>\n","    <tr>\n","      <th>10</th>\n","      <td>11</td>\n","      <td>2.0</td>\n","      <td>2.559633</td>\n","      <td>109</td>\n","    </tr>\n","    <tr>\n","      <th>8</th>\n","      <td>9</td>\n","      <td>3.0</td>\n","      <td>2.777778</td>\n","      <td>27</td>\n","    </tr>\n","    <tr>\n","      <th>7</th>\n","      <td>8</td>\n","      <td>3.0</td>\n","      <td>3.285714</td>\n","      <td>7</td>\n","    </tr>\n","    <tr>\n","      <th>24</th>\n","      <td>25</td>\n","      <td>3.0</td>\n","      <td>3.250000</td>\n","      <td>12</td>\n","    </tr>\n","    <tr>\n","      <th>25</th>\n","      <td>26</td>\n","      <td>4.0</td>\n","      <td>3.666667</td>\n","      <td>12</td>\n","    </tr>\n","    <tr>\n","      <th>16</th>\n","      <td>17</td>\n","      <td>4.0</td>\n","      <td>3.444444</td>\n","      <td>9</td>\n","    </tr>\n","    <tr>\n","      <th>20</th>\n","      <td>21</td>\n","      <td>4.0</td>\n","      <td>3.263158</td>\n","      <td>38</td>\n","    </tr>\n","    <tr>\n","      <th>23</th>\n","      <td>24</td>\n","      <td>5.0</td>\n","      <td>3.722222</td>\n","      <td>18</td>\n","    </tr>\n","    <tr>\n","      <th>19</th>\n","      <td>20</td>\n","      <td>5.0</td>\n","      <td>4.500000</td>\n","      <td>6</td>\n","    </tr>\n","    <tr>\n","      <th>21</th>\n","      <td>22</td>\n","      <td>5.0</td>\n","      <td>3.571429</td>\n","      <td>7</td>\n","    </tr>\n","    <tr>\n","      <th>17</th>\n","      <td>18</td>\n","      <td>5.0</td>\n","      <td>3.755556</td>\n","      <td>45</td>\n","    </tr>\n","    <tr>\n","      <th>26</th>\n","      <td>28</td>\n","      <td>5.0</td>\n","      <td>5.000000</td>\n","      <td>2</td>\n","    </tr>\n","    <tr>\n","      <th>22</th>\n","      <td>23</td>\n","      <td>5.0</td>\n","      <td>3.727273</td>\n","      <td>11</td>\n","    </tr>\n","    <tr>\n","      <th>27</th>\n","      <td>100</td>\n","      <td>5.0</td>\n","      <td>3.447368</td>\n","      <td>38</td>\n","    </tr>\n","  </tbody>\n","</table>\n","</div>\n","      <button class=\"colab-df-convert\" onclick=\"convertToInteractive('df-e1db9adb-41c9-4722-ac82-d4885f64d474')\"\n","              title=\"Convert this dataframe to an interactive table.\"\n","              style=\"display:none;\">\n","        \n","  <svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24px\"viewBox=\"0 0 24 24\"\n","       width=\"24px\">\n","    <path d=\"M0 0h24v24H0V0z\" fill=\"none\"/>\n","    <path d=\"M18.56 5.44l.94 2.06.94-2.06 2.06-.94-2.06-.94-.94-2.06-.94 2.06-2.06.94zm-11 1L8.5 8.5l.94-2.06 2.06-.94-2.06-.94L8.5 2.5l-.94 2.06-2.06.94zm10 10l.94 2.06.94-2.06 2.06-.94-2.06-.94-.94-2.06-.94 2.06-2.06.94z\"/><path d=\"M17.41 7.96l-1.37-1.37c-.4-.4-.92-.59-1.43-.59-.52 0-1.04.2-1.43.59L10.3 9.45l-7.72 7.72c-.78.78-.78 2.05 0 2.83L4 21.41c.39.39.9.59 1.41.59.51 0 1.02-.2 1.41-.59l7.78-7.78 2.81-2.81c.8-.78.8-2.07 0-2.86zM5.41 20L4 18.59l7.72-7.72 1.47 1.35L5.41 20z\"/>\n","  </svg>\n","      </button>\n","      \n","  <style>\n","    .colab-df-container {\n","      display:flex;\n","      flex-wrap:wrap;\n","      gap: 12px;\n","    }\n","\n","    .colab-df-convert {\n","      background-color: #E8F0FE;\n","      border: none;\n","      border-radius: 50%;\n","      cursor: pointer;\n","      display: none;\n","      fill: #1967D2;\n","      height: 32px;\n","      padding: 0 0 0 0;\n","      width: 32px;\n","    }\n","\n","    .colab-df-convert:hover {\n","      background-color: #E2EBFA;\n","      box-shadow: 0px 1px 2px rgba(60, 64, 67, 0.3), 0px 1px 3px 1px rgba(60, 64, 67, 0.15);\n","      fill: #174EA6;\n","    }\n","\n","    [theme=dark] .colab-df-convert {\n","      background-color: #3B4455;\n","      fill: #D2E3FC;\n","    }\n","\n","    [theme=dark] .colab-df-convert:hover {\n","      background-color: #434B5C;\n","      box-shadow: 0px 1px 3px 1px rgba(0, 0, 0, 0.15);\n","      filter: drop-shadow(0px 1px 2px rgba(0, 0, 0, 0.3));\n","      fill: #FFFFFF;\n","    }\n","  </style>\n","\n","      <script>\n","        const buttonEl =\n","          document.querySelector('#df-e1db9adb-41c9-4722-ac82-d4885f64d474 button.colab-df-convert');\n","        buttonEl.style.display =\n","          google.colab.kernel.accessAllowed ? 'block' : 'none';\n","\n","        async function convertToInteractive(key) {\n","          const element = document.querySelector('#df-e1db9adb-41c9-4722-ac82-d4885f64d474');\n","          const dataTable =\n","            await google.colab.kernel.invokeFunction('convertToInteractive',\n","                                                     [key], {});\n","          if (!dataTable) return;\n","\n","          const docLinkHtml = 'Like what you see? Visit the ' +\n","            '<a target=\"_blank\" href=https://colab.research.google.com/notebooks/data_table.ipynb>data table notebook</a>'\n","            + ' to learn more about interactive tables.';\n","          element.innerHTML = '';\n","          dataTable['output_type'] = 'display_data';\n","          await google.colab.output.renderOutput(dataTable, element);\n","          const docLink = document.createElement('div');\n","          docLink.innerHTML = docLinkHtml;\n","          element.appendChild(docLink);\n","        }\n","      </script>\n","    </div>\n","  </div>\n","  "]},"metadata":{},"execution_count":30}]},{"cell_type":"code","source":["# !pip install -q transformers"],"metadata":{"id":"tO5jfsdb1CDO","executionInfo":{"status":"ok","timestamp":1674570599662,"user_tz":-60,"elapsed":4414,"user":{"displayName":"Лиза Ганнич","userId":"05440454907585696632"}}},"execution_count":31,"outputs":[]},{"cell_type":"code","source":["df.custom_comment.head(10)"],"metadata":{"colab":{"base_uri":"https://localhost:8080/"},"id":"LQoxFHSvTGnJ","executionInfo":{"status":"ok","timestamp":1674570600519,"user_tz":-60,"elapsed":862,"user":{"displayName":"Лиза Ганнич","userId":"05440454907585696632"}},"outputId":"60c40fa6-264a-44f9-afa5-68c44a2e8ed9"},"execution_count":32,"outputs":[{"output_type":"execute_result","data":{"text/plain":["0    We had 7days small baby and a 2 year old with ...\n","1             Driver came to pick me up in wrong place\n","2                           Advertising other services\n","3                              Driver is a stupid dick\n","4     he was a rude driver, also cheating for the road\n","5                         took me to wrong place :((((\n","6                                  speaks good English\n","7    Dirty car, another number plate, driver is dif...\n","8                               He go with girl friend\n","9    He insults and says that I am Latino, surely y...\n","Name: custom_comment, dtype: object"]},"metadata":{},"execution_count":32}]},{"cell_type":"markdown","source":["## Sentiment analysis"],"metadata":{"id":"KhYvGNf1NSzg"}},{"cell_type":"code","source":["# Using pipeline class to make predictions from models available in the Hub in an easy way \n","# from transformers import pipeline\n","sentiment_pipeline = pipeline(\"sentiment-analysis\")\n","url = '/content/drive/MyDrive/Data_Science /NLP_Beginning/english_comments_uklon.csv'\n","df = pd.read_csv(url)\n","\n","data = df.custom_comment.to_list()\n","sentiment_list = sentiment_pipeline(data)"],"metadata":{"colab":{"base_uri":"https://localhost:8080/","height":181,"referenced_widgets":["7064599924b7490ca9d94bc2be961436","31fb9f96f004437e9638ad0be3297377","30b46b8363774e0fb3cc078ede9aabfa","dd447804de7648a586609ac62013356e","1924380db4be4e799452bdfadf797dc6","2abf36c673e849f3b240debf6e4e1b18","0b9105deb4264a5d885776bd6553320a","7441ff48a8da49228e6d7b684547c5ed","c0c648ec0b9d486fab5e42432a1712c4","a880a8dacd1b4bd6b4570901836086bb","86a6cef6a98d46488dabb7fb1fe9045a","590a31999c90438c9e69cbbfcea2233d","d2556e64342b44de991fb879fcd6219c","99c14f53742e49c785fe875277ae23ab","f83625ef04c5443db271a7174b5ae9dd","8759efc4b83948bcb23f7621343f4f34","d9d91f4944044aba878b42279d3b2b97","b70a9ec678594bbd9cd5ed2fda1d030f","4bffce8254454032b6bf03721470c548","a353160f508548b6a3325d45e2f54fdd","0dd28c9863f44c20a51cfef37c08adb1","2ae91f43a6ba4da9b28464591b4c3a12","78ca6c3562ba4a92a2927e006c70d06b","3d241069d94f4cc3a4ace9f86784a64c","662056c4703645f9908791f663af0b6f","bbe7bbeec2e54a4ab36a959d24bc4ee7","df0f95bd67274a8abf6df03c26d1b4f7","1d0d9cc3704c418693ed87f57be340c2","ac43b2a76ccb4dc2955fa4f8ceb4f62d","de40d6a274654e0087596a94b141d839","33ee9b5c41084222b4af3478c6a1bb88","2e8212600eda43aaa01cde98bc866b0b","36f6ff0085a449bb8f40380399b81bbb","98f6605e3dc64a1f9f891c5ed8a53972","d808a9fcd39549169d33668258f5d4d2","1a332fe627f1408885694bc84077e51e","a5177e1b459c42bb81703e8009457192","dfcef76abc2844ff9013e8ace449f51c","3c232f277d28441ca831f5923313e8ae","05049dc5417a47bdbc623d347e07f696","42771455b0434f628f59eb6a3730f955","d5fee0522cb44dafa3034104b0cf82b2","c6b1edeef02147f598353204d928553d","9c7108c7836845c7bbc154b707af0932"]},"id":"820ReOzIBfD1","executionInfo":{"status":"ok","timestamp":1674570943631,"user_tz":-60,"elapsed":343116,"user":{"displayName":"Лиза Ганнич","userId":"05440454907585696632"}},"outputId":"c123d32c-5c9f-413a-8ae4-9775bfc47f6b"},"execution_count":33,"outputs":[{"output_type":"stream","name":"stderr","text":["No model was supplied, defaulted to distilbert-base-uncased-finetuned-sst-2-english and revision af0f99b (https://huggingface.co/distilbert-base-uncased-finetuned-sst-2-english).\n","Using a pipeline without specifying a model name and revision in production is not recommended.\n"]},{"output_type":"display_data","data":{"text/plain":["Downloading:   0%|          | 0.00/629 [00:00<?, ?B/s]"],"application/vnd.jupyter.widget-view+json":{"version_major":2,"version_minor":0,"model_id":"7064599924b7490ca9d94bc2be961436"}},"metadata":{}},{"output_type":"display_data","data":{"text/plain":["Downloading:   0%|          | 0.00/268M [00:00<?, ?B/s]"],"application/vnd.jupyter.widget-view+json":{"version_major":2,"version_minor":0,"model_id":"590a31999c90438c9e69cbbfcea2233d"}},"metadata":{}},{"output_type":"display_data","data":{"text/plain":["Downloading:   0%|          | 0.00/48.0 [00:00<?, ?B/s]"],"application/vnd.jupyter.widget-view+json":{"version_major":2,"version_minor":0,"model_id":"78ca6c3562ba4a92a2927e006c70d06b"}},"metadata":{}},{"output_type":"display_data","data":{"text/plain":["Downloading:   0%|          | 0.00/232k [00:00<?, ?B/s]"],"application/vnd.jupyter.widget-view+json":{"version_major":2,"version_minor":0,"model_id":"98f6605e3dc64a1f9f891c5ed8a53972"}},"metadata":{}}]},{"cell_type":"code","source":["# create column with result of sentiment analysis is_negative \n","df['is_negative'] = [x['label']=='NEGATIVE' for x in sentiment_list]\n"],"metadata":{"id":"3eblyAafUB2y","executionInfo":{"status":"ok","timestamp":1674570943632,"user_tz":-60,"elapsed":25,"user":{"displayName":"Лиза Ганнич","userId":"05440454907585696632"}}},"execution_count":34,"outputs":[]},{"cell_type":"markdown","source":["# Data Preprocessing\n","\n"],"metadata":{"id":"BJp0G6_VBf1o"}},{"cell_type":"code","source":["# Topic modeling for negative  marks \n","# or sentiment analysis defined it like negative\n","df = df[(df.mark==1) | (df.mark==2) | (df.mark==3) | (df['is_negative'])]\n"],"metadata":{"id":"r3aPt-xFMFNO","executionInfo":{"status":"ok","timestamp":1674570943632,"user_tz":-60,"elapsed":24,"user":{"displayName":"Лиза Ганнич","userId":"05440454907585696632"}}},"execution_count":35,"outputs":[]},{"cell_type":"code","source":["df['advertising_other_services'] =  df.custom_comment.apply(lambda x: 1 if x.find('Advertising other services') != -1 else 0 )"],"metadata":{"id":"S2lTCwE3miuW","colab":{"base_uri":"https://localhost:8080/"},"executionInfo":{"status":"ok","timestamp":1674570943632,"user_tz":-60,"elapsed":23,"user":{"displayName":"Лиза Ганнич","userId":"05440454907585696632"}},"outputId":"bc50c27d-f5ec-4a9f-9d86-a10f7ef61a47"},"execution_count":36,"outputs":[{"output_type":"stream","name":"stderr","text":["<ipython-input-36-43f8ffc2b068>:1: SettingWithCopyWarning: \n","A value is trying to be set on a copy of a slice from a DataFrame.\n","Try using .loc[row_indexer,col_indexer] = value instead\n","\n","See the caveats in the documentation: https://pandas.pydata.org/pandas-docs/stable/user_guide/indexing.html#returning-a-view-versus-a-copy\n","  df['advertising_other_services'] =  df.custom_comment.apply(lambda x: 1 if x.find('Advertising other services') != -1 else 0 )\n"]}]},{"cell_type":"code","source":["df['custom_comment'] = df['custom_comment'].apply(lambda x : x.replace('Advertising other services', ''))"],"metadata":{"id":"0M1R4Gr-agMd","colab":{"base_uri":"https://localhost:8080/"},"executionInfo":{"status":"ok","timestamp":1674570943633,"user_tz":-60,"elapsed":23,"user":{"displayName":"Лиза Ганнич","userId":"05440454907585696632"}},"outputId":"a9f7d873-a737-4293-fd93-854f2e5f6110"},"execution_count":37,"outputs":[{"output_type":"stream","name":"stderr","text":["<ipython-input-37-7655cfa5ba22>:1: SettingWithCopyWarning: \n","A value is trying to be set on a copy of a slice from a DataFrame.\n","Try using .loc[row_indexer,col_indexer] = value instead\n","\n","See the caveats in the documentation: https://pandas.pydata.org/pandas-docs/stable/user_guide/indexing.html#returning-a-view-versus-a-copy\n","  df['custom_comment'] = df['custom_comment'].apply(lambda x : x.replace('Advertising other services', ''))\n"]}]},{"cell_type":"code","source":["df.count()"],"metadata":{"colab":{"base_uri":"https://localhost:8080/"},"id":"QUNlTuHX2tLm","executionInfo":{"status":"ok","timestamp":1674570943633,"user_tz":-60,"elapsed":19,"user":{"displayName":"Лиза Ганнич","userId":"05440454907585696632"}},"outputId":"7a50bedc-fc78-47e9-df0b-8ec2e5e6a45b"},"execution_count":38,"outputs":[{"output_type":"execute_result","data":{"text/plain":["order_id                      4359\n","feedback_id                   4359\n","rider_id                      4359\n","driver_id                     4359\n","created_at                    4359\n","region_id                     4359\n","mark                          4359\n","custom_comment                4359\n","critical                       393\n","price                           13\n","emotional                        1\n","Unnamed: 11                      1\n","is_negative                   4359\n","advertising_other_services    4359\n","dtype: int64"]},"metadata":{},"execution_count":38}]},{"cell_type":"code","source":["# drop empty feedbacks\n","df['lenth'] = df['custom_comment'].apply(lambda x: len(x))\n","df_zero = df[df.lenth == 0]\n","df = df[df.lenth != 0]\n","df.count()"],"metadata":{"colab":{"base_uri":"https://localhost:8080/"},"id":"boR5FQ0lrkF3","executionInfo":{"status":"ok","timestamp":1674570943634,"user_tz":-60,"elapsed":17,"user":{"displayName":"Лиза Ганнич","userId":"05440454907585696632"}},"outputId":"b13700e7-de34-4fef-cca5-4dbf9b27963a"},"execution_count":39,"outputs":[{"output_type":"execute_result","data":{"text/plain":["order_id                      4021\n","feedback_id                   4021\n","rider_id                      4021\n","driver_id                     4021\n","created_at                    4021\n","region_id                     4021\n","mark                          4021\n","custom_comment                4021\n","critical                       207\n","price                           13\n","emotional                        1\n","Unnamed: 11                      1\n","is_negative                   4021\n","advertising_other_services    4021\n","lenth                         4021\n","dtype: int64"]},"metadata":{},"execution_count":39}]},{"cell_type":"code","source":["# NLTK Stop words\n","from nltk.corpus import stopwords\n","stop_words = stopwords.words('english')\n","stop_words.extend(['driver', 'car', 'almost', 'also','muthafucker', 'really', 'fuck', 'fck'])\n","# df[]"],"metadata":{"id":"kyNoUZ81BpEq","executionInfo":{"status":"ok","timestamp":1674570943634,"user_tz":-60,"elapsed":14,"user":{"displayName":"Лиза Ганнич","userId":"05440454907585696632"}}},"execution_count":40,"outputs":[]},{"cell_type":"code","source":["df['emoji'] = df.custom_comment.apply(lambda x: emoji.emoji_list(x)).apply(lambda x: x if len(x)!=0 else 0)\n","df[df.emoji != 0]['custom_comment'].head(3)"],"metadata":{"id":"uYaBVWtV3g0y","colab":{"base_uri":"https://localhost:8080/"},"executionInfo":{"status":"ok","timestamp":1674570943635,"user_tz":-60,"elapsed":14,"user":{"displayName":"Лиза Ганнич","userId":"05440454907585696632"}},"outputId":"9d17d349-78b1-4882-e076-13e55430122d"},"execution_count":41,"outputs":[{"output_type":"execute_result","data":{"text/plain":["130                                                    🥲\n","147                            a little too much talk 🤏🏻\n","468    No taxi came he just went himself and complete...\n","Name: custom_comment, dtype: object"]},"metadata":{},"execution_count":41}]},{"cell_type":"code","source":["df['custom_comment'] = df.custom_comment.apply(lambda x: emoji.demojize(x))"],"metadata":{"id":"3-ZjV0IWHukZ","executionInfo":{"status":"ok","timestamp":1674570943637,"user_tz":-60,"elapsed":13,"user":{"displayName":"Лиза Ганнич","userId":"05440454907585696632"}}},"execution_count":42,"outputs":[]},{"cell_type":"code","source":["# Words spell checking with a TextBlob\n","def word_spell_correction(df):\n","  return [Word(word.lower()).correct() for word in word_tokenize(df)]\n","  \n","df['custom_comment_corrected'] = df['custom_comment'].apply(lambda x: ' '.join(word_spell_correction(x)))"],"metadata":{"id":"6zd0AyPh3r9t","executionInfo":{"status":"ok","timestamp":1674571315039,"user_tz":-60,"elapsed":371415,"user":{"displayName":"Лиза Ганнич","userId":"05440454907585696632"}}},"execution_count":43,"outputs":[]},{"cell_type":"code","source":["data = df"],"metadata":{"id":"OwvkIpB2Q5mf","executionInfo":{"status":"ok","timestamp":1674571315039,"user_tz":-60,"elapsed":26,"user":{"displayName":"Лиза Ганнич","userId":"05440454907585696632"}}},"execution_count":44,"outputs":[]},{"cell_type":"code","source":["df, test = train_test_split(df,  test_size=0.2, random_state=42)"],"metadata":{"id":"txxuIy5FAVoU","executionInfo":{"status":"ok","timestamp":1674571315040,"user_tz":-60,"elapsed":13,"user":{"displayName":"Лиза Ганнич","userId":"05440454907585696632"}}},"execution_count":45,"outputs":[]},{"cell_type":"code","source":["def sent_to_words(sentences):\n","    for sentence in sentences:       \n","        yield(gensim.utils.simple_preprocess(str(sentence), deacc=True))  # deacc=True removes punctuations\n","\n","# data_words = list(sent_to_words(df.custom_comment))\n","data_words = list(sent_to_words(df.custom_comment_corrected))\n","\n","\n","# print(data_words[75])"],"metadata":{"id":"8rS43SAVHIAc","executionInfo":{"status":"ok","timestamp":1674571315040,"user_tz":-60,"elapsed":13,"user":{"displayName":"Лиза Ганнич","userId":"05440454907585696632"}}},"execution_count":46,"outputs":[]},{"cell_type":"code","source":["df['list_of_words'] = list(sent_to_words(df.custom_comment_corrected))\n","df.head(1)"],"metadata":{"colab":{"base_uri":"https://localhost:8080/","height":214},"id":"QgPz5pIPHwky","executionInfo":{"status":"ok","timestamp":1674571315041,"user_tz":-60,"elapsed":13,"user":{"displayName":"Лиза Ганнич","userId":"05440454907585696632"}},"outputId":"1c10fb5c-89df-47d7-e8bb-91195f017109"},"execution_count":47,"outputs":[{"output_type":"execute_result","data":{"text/plain":["                                  order_id  \\\n","3735  a815ac98-de97-48f8-b861-9639af54e452   \n","\n","                               feedback_id  \\\n","3735  e6f68fd4-5969-4136-81d5-7f3bbbdeca2d   \n","\n","                                  rider_id  \\\n","3735  d16ec352-1efd-46df-9880-90929941934f   \n","\n","                                 driver_id       created_at  region_id  mark  \\\n","3735  aa7d6757-4bf7-4870-bf78-e19e2aa598d6  11/9/2021 14:08          6     1   \n","\n","           custom_comment  critical   price emotional  Unnamed: 11  \\\n","3735  Driver was arrogant        NaN    NaN       NaN          NaN   \n","\n","      is_negative  advertising_other_services  lenth emoji  \\\n","3735         True                           0     19     0   \n","\n","     custom_comment_corrected            list_of_words  \n","3735      driver was arrogant  [driver, was, arrogant]  "],"text/html":["\n","  <div id=\"df-75a2c7d3-968c-4540-aace-d6ce5efcafa1\">\n","    <div class=\"colab-df-container\">\n","      <div>\n","<style scoped>\n","    .dataframe tbody tr th:only-of-type {\n","        vertical-align: middle;\n","    }\n","\n","    .dataframe tbody tr th {\n","        vertical-align: top;\n","    }\n","\n","    .dataframe thead th {\n","        text-align: right;\n","    }\n","</style>\n","<table border=\"1\" class=\"dataframe\">\n","  <thead>\n","    <tr style=\"text-align: right;\">\n","      <th></th>\n","      <th>order_id</th>\n","      <th>feedback_id</th>\n","      <th>rider_id</th>\n","      <th>driver_id</th>\n","      <th>created_at</th>\n","      <th>region_id</th>\n","      <th>mark</th>\n","      <th>custom_comment</th>\n","      <th>critical</th>\n","      <th>price</th>\n","      <th>emotional</th>\n","      <th>Unnamed: 11</th>\n","      <th>is_negative</th>\n","      <th>advertising_other_services</th>\n","      <th>lenth</th>\n","      <th>emoji</th>\n","      <th>custom_comment_corrected</th>\n","      <th>list_of_words</th>\n","    </tr>\n","  </thead>\n","  <tbody>\n","    <tr>\n","      <th>3735</th>\n","      <td>a815ac98-de97-48f8-b861-9639af54e452</td>\n","      <td>e6f68fd4-5969-4136-81d5-7f3bbbdeca2d</td>\n","      <td>d16ec352-1efd-46df-9880-90929941934f</td>\n","      <td>aa7d6757-4bf7-4870-bf78-e19e2aa598d6</td>\n","      <td>11/9/2021 14:08</td>\n","      <td>6</td>\n","      <td>1</td>\n","      <td>Driver was arrogant</td>\n","      <td>NaN</td>\n","      <td>NaN</td>\n","      <td>NaN</td>\n","      <td>NaN</td>\n","      <td>True</td>\n","      <td>0</td>\n","      <td>19</td>\n","      <td>0</td>\n","      <td>driver was arrogant</td>\n","      <td>[driver, was, arrogant]</td>\n","    </tr>\n","  </tbody>\n","</table>\n","</div>\n","      <button class=\"colab-df-convert\" onclick=\"convertToInteractive('df-75a2c7d3-968c-4540-aace-d6ce5efcafa1')\"\n","              title=\"Convert this dataframe to an interactive table.\"\n","              style=\"display:none;\">\n","        \n","  <svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24px\"viewBox=\"0 0 24 24\"\n","       width=\"24px\">\n","    <path d=\"M0 0h24v24H0V0z\" fill=\"none\"/>\n","    <path d=\"M18.56 5.44l.94 2.06.94-2.06 2.06-.94-2.06-.94-.94-2.06-.94 2.06-2.06.94zm-11 1L8.5 8.5l.94-2.06 2.06-.94-2.06-.94L8.5 2.5l-.94 2.06-2.06.94zm10 10l.94 2.06.94-2.06 2.06-.94-2.06-.94-.94-2.06-.94 2.06-2.06.94z\"/><path d=\"M17.41 7.96l-1.37-1.37c-.4-.4-.92-.59-1.43-.59-.52 0-1.04.2-1.43.59L10.3 9.45l-7.72 7.72c-.78.78-.78 2.05 0 2.83L4 21.41c.39.39.9.59 1.41.59.51 0 1.02-.2 1.41-.59l7.78-7.78 2.81-2.81c.8-.78.8-2.07 0-2.86zM5.41 20L4 18.59l7.72-7.72 1.47 1.35L5.41 20z\"/>\n","  </svg>\n","      </button>\n","      \n","  <style>\n","    .colab-df-container {\n","      display:flex;\n","      flex-wrap:wrap;\n","      gap: 12px;\n","    }\n","\n","    .colab-df-convert {\n","      background-color: #E8F0FE;\n","      border: none;\n","      border-radius: 50%;\n","      cursor: pointer;\n","      display: none;\n","      fill: #1967D2;\n","      height: 32px;\n","      padding: 0 0 0 0;\n","      width: 32px;\n","    }\n","\n","    .colab-df-convert:hover {\n","      background-color: #E2EBFA;\n","      box-shadow: 0px 1px 2px rgba(60, 64, 67, 0.3), 0px 1px 3px 1px rgba(60, 64, 67, 0.15);\n","      fill: #174EA6;\n","    }\n","\n","    [theme=dark] .colab-df-convert {\n","      background-color: #3B4455;\n","      fill: #D2E3FC;\n","    }\n","\n","    [theme=dark] .colab-df-convert:hover {\n","      background-color: #434B5C;\n","      box-shadow: 0px 1px 3px 1px rgba(0, 0, 0, 0.15);\n","      filter: drop-shadow(0px 1px 2px rgba(0, 0, 0, 0.3));\n","      fill: #FFFFFF;\n","    }\n","  </style>\n","\n","      <script>\n","        const buttonEl =\n","          document.querySelector('#df-75a2c7d3-968c-4540-aace-d6ce5efcafa1 button.colab-df-convert');\n","        buttonEl.style.display =\n","          google.colab.kernel.accessAllowed ? 'block' : 'none';\n","\n","        async function convertToInteractive(key) {\n","          const element = document.querySelector('#df-75a2c7d3-968c-4540-aace-d6ce5efcafa1');\n","          const dataTable =\n","            await google.colab.kernel.invokeFunction('convertToInteractive',\n","                                                     [key], {});\n","          if (!dataTable) return;\n","\n","          const docLinkHtml = 'Like what you see? Visit the ' +\n","            '<a target=\"_blank\" href=https://colab.research.google.com/notebooks/data_table.ipynb>data table notebook</a>'\n","            + ' to learn more about interactive tables.';\n","          element.innerHTML = '';\n","          dataTable['output_type'] = 'display_data';\n","          await google.colab.output.renderOutput(dataTable, element);\n","          const docLink = document.createElement('div');\n","          docLink.innerHTML = docLinkHtml;\n","          element.appendChild(docLink);\n","        }\n","      </script>\n","    </div>\n","  </div>\n","  "]},"metadata":{},"execution_count":47}]},{"cell_type":"code","source":["# Build the bigram and trigram models\n","bigram = gensim.models.Phrases(data_words, min_count=5, threshold=100) # higher threshold fewer phrases.\n","trigram = gensim.models.Phrases(bigram[data_words], threshold=100)  \n","\n","# Faster way to get a sentence clubbed as a trigram/bigram\n","bigram_mod = gensim.models.phrases.Phraser(bigram)\n","trigram_mod = gensim.models.phrases.Phraser(trigram)\n","\n","# See trigram example\n","# print(trigram_mod[bigram_mod[data_words[0]]])"],"metadata":{"colab":{"base_uri":"https://localhost:8080/"},"id":"-jLQUCDPHmSl","executionInfo":{"status":"ok","timestamp":1674571315041,"user_tz":-60,"elapsed":12,"user":{"displayName":"Лиза Ганнич","userId":"05440454907585696632"}},"outputId":"0787286b-3133-46db-85f5-f228bb1621aa"},"execution_count":48,"outputs":[{"output_type":"stream","name":"stderr","text":["/usr/local/lib/python3.8/dist-packages/gensim/models/phrases.py:598: UserWarning: For a faster implementation, use the gensim.models.phrases.Phraser class\n","  warnings.warn(\"For a faster implementation, use the gensim.models.phrases.Phraser class\")\n"]}]},{"cell_type":"code","source":["# Define functions for stopwords, bigrams, trigrams and lemmatization\n","def remove_stopwords(texts):\n","    return [[word for word in simple_preprocess(str(doc)) if word not in stop_words] for doc in texts]\n","def make_bigrams(texts):\n","    return [bigram_mod[doc] for doc in texts]\n","def make_trigrams(texts):\n","    return [trigram_mod[bigram_mod[doc]] for doc in texts]\n","def lemmatization(texts, allowed_postags=['NOUN', 'ADJ', 'VERB', 'ADV']):\n","    \"\"\"https://spacy.io/api/annotation\"\"\"\n","    texts_out = []\n","    for sent in texts:\n","        doc = nlp(\" \".join(sent)) \n","        texts_out.append([token.lemma_ for token in doc if token.pos_ in allowed_postags])\n","    return texts_out"],"metadata":{"id":"D373c8ABH035","executionInfo":{"status":"ok","timestamp":1674571315041,"user_tz":-60,"elapsed":8,"user":{"displayName":"Лиза Ганнич","userId":"05440454907585696632"}}},"execution_count":49,"outputs":[]},{"cell_type":"code","source":["# Remove Stop Words\n","data_words_nostops = remove_stopwords(data_words)\n","# Form Bigrams\n","data_words_bigrams = make_trigrams(data_words_nostops)\n","# Initialize spacy 'en' model, keeping only tagger component (for efficiency)\n","# python3 -m spacy download en\n","# nlp = spacy.load('en', disable=['parser', 'ner'])\n","nlp = spacy.load(\"en_core_web_sm\") # TODO try medium and large \n","# Do lemmatization keeping only noun, adj, vb, adv\n","data_lemmatized = lemmatization(data_words_bigrams, allowed_postags=['NOUN', 'ADJ', 'VERB', 'ADV'])\n"],"metadata":{"id":"KAG2pufgH5cc","executionInfo":{"status":"ok","timestamp":1674571337239,"user_tz":-60,"elapsed":22205,"user":{"displayName":"Лиза Ганнич","userId":"05440454907585696632"}}},"execution_count":50,"outputs":[]},{"cell_type":"code","source":["#  train, test = train_test_split(data_lemmatized,  test_size=0.2, random_state=42)"],"metadata":{"id":"Q0SlytDnIg6q","executionInfo":{"status":"ok","timestamp":1674571337240,"user_tz":-60,"elapsed":6,"user":{"displayName":"Лиза Ганнич","userId":"05440454907585696632"}}},"execution_count":51,"outputs":[]},{"cell_type":"code","source":["# Двумя основными входными данными для тематической модели LDA являются4\n","# словарь (id2word) и корпус\n","\n","# Create Dictionary\n","id2word = corpora.Dictionary(data_lemmatized)\n","# Create Corpus\n","texts = data_lemmatized\n","# Term Document Frequency\n","corpus = [id2word.doc2bow(text) for text in texts]\n","# View\n","# print(corpus[1000])"],"metadata":{"id":"_-HBbrUaItaD","executionInfo":{"status":"ok","timestamp":1674571337240,"user_tz":-60,"elapsed":5,"user":{"displayName":"Лиза Ганнич","userId":"05440454907585696632"}}},"execution_count":52,"outputs":[]},{"cell_type":"code","source":["# Human readable format of corpus (term-frequency)\n","# [[(id2word[id], freq) for id, freq in cp] for cp in corpus[:3]]"],"metadata":{"id":"ycnmd_JdJGdA","executionInfo":{"status":"ok","timestamp":1674571337240,"user_tz":-60,"elapsed":4,"user":{"displayName":"Лиза Ганнич","userId":"05440454907585696632"}}},"execution_count":53,"outputs":[]},{"cell_type":"markdown","source":["# Topic Modelling\n","### Latent Dirichlet Allocation (LDA)  with Gensim\n","\n"],"metadata":{"id":"vmBYYKGbA48c"}},{"cell_type":"code","source":["# Build LDA model\n","\n","lda_model = gensim.models.ldamodel.LdaModel(corpus=corpus,\n","                                           id2word=id2word,\n","                                           num_topics=20, \n","                                           random_state=100,\n","                                           update_every=1,\n","                                           chunksize=600,\n","                                           passes=10,\n","                                           alpha=0.2,\n","                                          eta = 0.91,\n","                                           per_word_topics=True,\n","                                           minimum_phi_value = 0.2 )\n","\n","# 0.55\n","# lda_model = gensim.models.ldamodel.LdaModel(corpus=corpus,\n","#                                            id2word=id2word,\n","#                                            num_topics=25, \n","#                                            random_state=100,\n","#                                            update_every=1,\n","#                                            chunksize=500,\n","#                                            passes=10,\n","#                                            alpha=0.9,\n","#                                           # eta = 0.1,\n","#                                            per_word_topics=True)"],"metadata":{"id":"EA6dp4EPA-Ed","executionInfo":{"status":"ok","timestamp":1674571343500,"user_tz":-60,"elapsed":6264,"user":{"displayName":"Лиза Ганнич","userId":"05440454907585696632"}}},"execution_count":54,"outputs":[]},{"cell_type":"code","source":["lda_model.print_topics()"],"metadata":{"colab":{"base_uri":"https://localhost:8080/"},"id":"fGTpbhc6JVsU","executionInfo":{"status":"ok","timestamp":1674571343501,"user_tz":-60,"elapsed":21,"user":{"displayName":"Лиза Ганнич","userId":"05440454907585696632"}},"outputId":"56c49e64-f1e4-4b16-f131-5984076b6523"},"execution_count":55,"outputs":[{"output_type":"execute_result","data":{"text/plain":["[(0,\n","  '0.011*\"seat\" + 0.011*\"put\" + 0.008*\"behave\" + 0.008*\"front\" + 0.004*\"star\" + 0.004*\"belt\" + 0.002*\"box\" + 0.002*\"fasten\" + 0.002*\"back\" + 0.002*\"set\"'),\n"," (1,\n","  '0.094*\"drive\" + 0.029*\"road\" + 0.021*\"fast\" + 0.017*\"shout\" + 0.015*\"music\" + 0.010*\"safe\" + 0.009*\"loud\" + 0.007*\"dangerous\" + 0.007*\"miss\" + 0.007*\"know\"'),\n"," (2,\n","  '0.159*\"rude\" + 0.027*\"taxi\" + 0.016*\"much\" + 0.007*\"bit\" + 0.006*\"scream\" + 0.006*\"disrespectful\" + 0.004*\"keep\" + 0.003*\"little\" + 0.003*\"share\" + 0.002*\"inappropriate\"'),\n"," (3,\n","  '0.051*\"arrive\" + 0.041*\"idle\" + 0.039*\"late\" + 0.038*\"start\" + 0.029*\"wait\" + 0.027*\"time\" + 0.023*\"minute\" + 0.021*\"come\" + 0.017*\"even\" + 0.014*\"charge\"'),\n"," (4,\n","  '0.014*\"attitude\" + 0.011*\"speed\" + 0.008*\"poor\" + 0.004*\"city\" + 0.004*\"fraud\" + 0.002*\"limit\" + 0.002*\"high\" + 0.002*\"km\" + 0.002*\"nasty\" + 0.002*\"part\"'),\n"," (5,\n","  '0.048*\"phone\" + 0.041*\"driving\" + 0.035*\"use\" + 0.022*\"talk\" + 0.009*\"fight\" + 0.007*\"testing\" + 0.007*\"man\" + 0.005*\"reckless\" + 0.005*\"rough\" + 0.005*\"dangerous\"'),\n"," (6,\n","  '0.048*\"trip\" + 0.047*\"take\" + 0.042*\"money\" + 0.028*\"pay\" + 0.016*\"behavior\" + 0.015*\"ride\" + 0.014*\"ask\" + 0.014*\"order\" + 0.013*\"extra\" + 0.011*\"want\"'),\n"," (7,\n","  '0.034*\"time\" + 0.033*\"call\" + 0.017*\"speak\" + 0.011*\"customer\" + 0.008*\"russian\" + 0.005*\"arrival\" + 0.005*\"ukrainian\" + 0.005*\"waste\" + 0.004*\"lack\" + 0.003*\"answer\"'),\n"," (8,\n","  '0.077*\"address\" + 0.033*\"go\" + 0.027*\"wrong\" + 0.020*\"take\" + 0.019*\"need\" + 0.017*\"way\" + 0.015*\"right\" + 0.013*\"stop\" + 0.011*\"open\" + 0.010*\"say\"'),\n"," (9,\n","  '0.022*\"slow\" + 0.017*\"feel\" + 0.015*\"aggressive\" + 0.012*\"listen\" + 0.007*\"comfortable\" + 0.006*\"issue\" + 0.006*\"watch\" + 0.004*\"sit\" + 0.003*\"approach\" + 0.003*\"exhaust\"'),\n"," (10,\n","  '0.023*\"passenger\" + 0.019*\"driver\" + 0.013*\"polite\" + 0.011*\"yell\" + 0.011*\"think\" + 0.005*\"item\" + 0.005*\"comfort\" + 0.005*\"uncomfortable\" + 0.005*\"push\" + 0.003*\"sit\"'),\n"," (11,\n","  '0.019*\"ask\" + 0.017*\"cold\" + 0.013*\"entrance\" + 0.013*\"number\" + 0.007*\"stupid\" + 0.007*\"theater\" + 0.007*\"manner\" + 0.006*\"unpleasant\" + 0.005*\"thing\" + 0.005*\"call\"'),\n"," (12,\n","  '0.013*\"arrogant\" + 0.012*\"follow\" + 0.010*\"map\" + 0.006*\"side\" + 0.003*\"begin\" + 0.003*\"needless\" + 0.003*\"discussion\" + 0.003*\"earphone\" + 0.003*\"direction\" + 0.003*\"cheap\"'),\n"," (13,\n","  '0.016*\"help\" + 0.014*\"smoke\" + 0.013*\"bag\" + 0.012*\"client\" + 0.006*\"heavy\" + 0.006*\"carry\" + 0.005*\"swear\" + 0.004*\"luggage\" + 0.004*\"baggage\" + 0.003*\"girl\"'),\n"," (14,\n","  '0.015*\"well\" + 0.011*\"understand\" + 0.007*\"abusive\" + 0.004*\"throw\" + 0.003*\"respectful\" + 0.003*\"expel\" + 0.003*\"none\" + 0.002*\"drunk\" + 0.001*\"small\" + 0.001*\"great\"'),\n"," (15,\n","  '0.033*\"good\" + 0.026*\"racism\" + 0.019*\"mask\" + 0.013*\"service\" + 0.012*\"terrible\" + 0.011*\"dirty\" + 0.010*\"smoking\" + 0.008*\"cough\" + 0.008*\"professional\" + 0.007*\"see\"'),\n"," (16,\n","  '0.019*\"ride\" + 0.013*\"insult\" + 0.010*\"recommend\" + 0.008*\"mean\" + 0.004*\"general\" + 0.004*\"safety\" + 0.003*\"complete\" + 0.003*\"harass\" + 0.003*\"ban\" + 0.003*\"perennially\"'),\n"," (17,\n","  '0.121*\"bad\" + 0.026*\"route\" + 0.025*\"behaviour\" + 0.025*\"long\" + 0.011*\"navigation\" + 0.007*\"choose\" + 0.007*\"let\" + 0.006*\"traffic\" + 0.004*\"communication\" + 0.003*\"day\"'),\n"," (18,\n","  '0.047*\"wrong\" + 0.043*\"location\" + 0.040*\"drop\" + 0.035*\"change\" + 0.032*\"give\" + 0.030*\"pick\" + 0.028*\"place\" + 0.025*\"destination\" + 0.020*\"leave\" + 0.018*\"want\"'),\n"," (19,\n","  '0.031*\"smell\" + 0.012*\"person\" + 0.011*\"nice\" + 0.006*\"unfriendly\" + 0.004*\"cigarette\" + 0.004*\"seatbelt\" + 0.004*\"strong\" + 0.004*\"thumbs_up\" + 0.003*\"irritated\" + 0.003*\"patient\"')]"]},"metadata":{},"execution_count":55}]},{"cell_type":"code","source":["topic_names = {0:'car_broken',\n","               1:'driving_style',\n","               2:'aggresive_behaviour',\n","               3:'point_of_start',\n","               4:'speed_limit',\n","               5:'use_phone_while_driving',\n","               6:'extra_money_paid',\n","               7:'language_conflict',\n","               8:'not_optimal_way',\n","               9:'passanger_disagree',\n","               10:'aggresive_behaviour',\n","               11:'missundertanding',\n","               12: 'not_optimal_way',\n","               13: 'luggage_help',\n","               14: 'too aggresive behaviour',\n","               15: 'rasism_covid',\n","               16:'personal_safety',\n","               17: 'wrong_way',\n","               18: 'wrong_drop_location',\n","               19: 'dirty_car'\n","              } "],"metadata":{"id":"8VNt9Dgg7Qmk","executionInfo":{"status":"ok","timestamp":1674571343501,"user_tz":-60,"elapsed":17,"user":{"displayName":"Лиза Ганнич","userId":"05440454907585696632"}}},"execution_count":56,"outputs":[]},{"cell_type":"code","source":["# Compute Perplexity\n","print('\\nPerplexity: ', lda_model.log_perplexity(corpus))  # a measure of how good the model is. lower the better.\n","# Compute Coherence Score\n","coherence_model_lda = CoherenceModel(model=lda_model, texts=data_lemmatized, dictionary=id2word, coherence='c_v')\n","coherence_lda = coherence_model_lda.get_coherence()\n","print('\\nCoherence Score: ', coherence_lda)\n","\n","# Perplexity:  -7.502678731476726\n","\n","# Coherence Score:  0.5545030167477594"],"metadata":{"colab":{"base_uri":"https://localhost:8080/"},"id":"7AVm0VnKJckA","executionInfo":{"status":"ok","timestamp":1674571345740,"user_tz":-60,"elapsed":2255,"user":{"displayName":"Лиза Ганнич","userId":"05440454907585696632"}},"outputId":"370ffa7c-1f09-46db-e95b-e0de4a8f346e"},"execution_count":57,"outputs":[{"output_type":"stream","name":"stdout","text":["\n","Perplexity:  -7.463962285246751\n","\n","Coherence Score:  0.4733980120374617\n"]}]},{"cell_type":"code","source":["# # Visualize the topics\n","# pyLDAvis.enable_notebook()\n","# vis = pyLDAvis.gensim_models.prepare(lda_model, corpus, id2word)\n","# vis"],"metadata":{"id":"TWjoC3pqKK-a","executionInfo":{"status":"ok","timestamp":1674571345741,"user_tz":-60,"elapsed":5,"user":{"displayName":"Лиза Ганнич","userId":"05440454907585696632"}}},"execution_count":58,"outputs":[]},{"cell_type":"code","source":["sent_topics_df = pd.DataFrame()\n","for n in range(0,len(lda_model[corpus])):\n","  for i, row in enumerate(lda_model[corpus][n][2]):\n","    # print(len(row))\n","    # if len(lda_model[corpus][n][2])>2:\n","    #   i, b = row[0]\n","    # else:\n","    i, b = row\n","\n","    topic_number = b[0][0]\n","    prop_topic = b[0][1]\n","    # print(i, topic_number)\n","\n","    # print([i,topic_number,prop_topic ])\n","    sent_topics_df = sent_topics_df.append(pd.Series([int(i),topic_number, prop_topic]), ignore_index=True)\n","\n","    # for j, (topic_num, prop_topic) in row:\n","    #   sent_topics_df = sent_topics_df.append(pd.Series(j, [int(topic_num), prop_topic]), ignore_index=True)\n","\n"],"metadata":{"id":"FxTlDGMRzxPn","executionInfo":{"status":"ok","timestamp":1674571366649,"user_tz":-60,"elapsed":20912,"user":{"displayName":"Лиза Ганнич","userId":"05440454907585696632"}}},"execution_count":59,"outputs":[]},{"cell_type":"code","source":["sent_topics_df = sent_topics_df.rename(columns={0: \"index\", 1: \"topic_number\", 2:'prop_topic'})\n","sent_topics_df['index'] = sent_topics_df['index'].astype('int')\n","sent_topics_df = sent_topics_df.set_index('index')"],"metadata":{"id":"ZVM1oNGp6KZX","executionInfo":{"status":"ok","timestamp":1674571366649,"user_tz":-60,"elapsed":25,"user":{"displayName":"Лиза Ганнич","userId":"05440454907585696632"}}},"execution_count":60,"outputs":[]},{"cell_type":"code","source":["# sent_topics_df.head(1)'\n","empty = pd.DataFrame()\n","empty['list_of_words'] = data_words\n","\n","data_topic =  pd.merge(empty, sent_topics_df, left_index=True, right_index=True)\n","data_topic = data_topic.rename(columns={0: \"index\", 1: \"topic_number\", 2:'prop_topic'})\n","data_topic['list_of_words']= data_topic['list_of_words'].astype('str')\n","df['list_of_words']= df['list_of_words'].astype('str')"],"metadata":{"id":"db08lRWGORQq","executionInfo":{"status":"ok","timestamp":1674571366650,"user_tz":-60,"elapsed":25,"user":{"displayName":"Лиза Ганнич","userId":"05440454907585696632"}}},"execution_count":61,"outputs":[]},{"cell_type":"code","source":["input_var =  pd.merge(df, data_topic, on = 'list_of_words', how = 'inner')\n","# input_var = input_var.drop_duplicates(['order_id', 'list_of_words'])"],"metadata":{"id":"gMbBZ3OVBhoz","executionInfo":{"status":"ok","timestamp":1674571366650,"user_tz":-60,"elapsed":24,"user":{"displayName":"Лиза Ганнич","userId":"05440454907585696632"}}},"execution_count":62,"outputs":[]},{"cell_type":"code","source":["input_var['topic_title'] = input_var['topic_number'].apply(lambda x: topic_names[x])\n","# len(input_var)"],"metadata":{"id":"Z31IFiX4B5C4","executionInfo":{"status":"ok","timestamp":1674571366650,"user_tz":-60,"elapsed":24,"user":{"displayName":"Лиза Ганнич","userId":"05440454907585696632"}}},"execution_count":63,"outputs":[]},{"cell_type":"markdown","source":["## Regression modeling"],"metadata":{"id":"7bpiUYQaOFR-"}},{"cell_type":"code","source":["input_var = pd.get_dummies(input_var, columns=['topic_title'])"],"metadata":{"id":"M27U9-uYOI1m","executionInfo":{"status":"ok","timestamp":1674571557495,"user_tz":-60,"elapsed":566,"user":{"displayName":"Лиза Ганнич","userId":"05440454907585696632"}}},"execution_count":64,"outputs":[]},{"cell_type":"code","source":["input_var = input_var.rename(columns = {'critical ':'critical'})"],"metadata":{"id":"k0KB_ZA1bCxu","executionInfo":{"status":"ok","timestamp":1674571558205,"user_tz":-60,"elapsed":2,"user":{"displayName":"Лиза Ганнич","userId":"05440454907585696632"}}},"execution_count":65,"outputs":[]},{"cell_type":"code","source":["input_var = input_var.drop_duplicates(['order_id', 'feedback_id', 'rider_id', 'driver_id', 'created_at',\n","       'region_id', 'mark', 'custom_comment', 'mark', 'topic_number'],keep='last')\n","len(input_var)"],"metadata":{"colab":{"base_uri":"https://localhost:8080/"},"id":"XJtr-WZSYbro","executionInfo":{"status":"ok","timestamp":1674571558744,"user_tz":-60,"elapsed":7,"user":{"displayName":"Лиза Ганнич","userId":"05440454907585696632"}},"outputId":"3f7c8768-5edf-4b21-fde6-be8d6f566c1f"},"execution_count":66,"outputs":[{"output_type":"execute_result","data":{"text/plain":["4117"]},"metadata":{},"execution_count":66}]},{"cell_type":"code","source":["input_var.columns"],"metadata":{"colab":{"base_uri":"https://localhost:8080/"},"id":"qIvh7maXdiEf","executionInfo":{"status":"ok","timestamp":1674571558744,"user_tz":-60,"elapsed":5,"user":{"displayName":"Лиза Ганнич","userId":"05440454907585696632"}},"outputId":"5beaeb90-9d8d-49f6-df55-cdf980c1f922"},"execution_count":67,"outputs":[{"output_type":"execute_result","data":{"text/plain":["Index(['order_id', 'feedback_id', 'rider_id', 'driver_id', 'created_at',\n","       'region_id', 'mark', 'custom_comment', 'critical', 'price', 'emotional',\n","       'Unnamed: 11', 'is_negative', 'advertising_other_services', 'lenth',\n","       'emoji', 'custom_comment_corrected', 'list_of_words', 'topic_number',\n","       'prop_topic', 'topic_title_aggresive_behaviour',\n","       'topic_title_car_broken', 'topic_title_dirty_car',\n","       'topic_title_driving_style', 'topic_title_extra_money_paid',\n","       'topic_title_language_conflict', 'topic_title_luggage_help',\n","       'topic_title_missundertanding', 'topic_title_not_optimal_way',\n","       'topic_title_passanger_disagree', 'topic_title_personal_safety',\n","       'topic_title_point_of_start', 'topic_title_rasism_covid',\n","       'topic_title_speed_limit', 'topic_title_too aggresive behaviour',\n","       'topic_title_use_phone_while_driving',\n","       'topic_title_wrong_drop_location', 'topic_title_wrong_way'],\n","      dtype='object')"]},"metadata":{},"execution_count":67}]},{"cell_type":"code","source":["input_var['critical'] = input_var['critical'].replace(0.5,1)\n","input_var.groupby('critical').count()\n"],"metadata":{"colab":{"base_uri":"https://localhost:8080/","height":272},"id":"hEXaf9W1Tklp","executionInfo":{"status":"ok","timestamp":1674572707825,"user_tz":-60,"elapsed":6,"user":{"displayName":"Лиза Ганнич","userId":"05440454907585696632"}},"outputId":"10c0a013-127a-4a09-cdf7-623ac6deadbe"},"execution_count":80,"outputs":[{"output_type":"execute_result","data":{"text/plain":["          order_id  feedback_id  rider_id  driver_id  created_at  region_id  \\\n","critical                                                                      \n","0.0            142          142       142        142         142        142   \n","1.0             67           67        67         67          67         67   \n","\n","          mark  custom_comment  price  emotional  ...  \\\n","critical                                          ...   \n","0.0        142             142     13          0  ...   \n","1.0         67              67      1          0  ...   \n","\n","          topic_title_passanger_disagree  topic_title_personal_safety  \\\n","critical                                                                \n","0.0                                  142                          142   \n","1.0                                   67                           67   \n","\n","          topic_title_point_of_start  topic_title_rasism_covid  \\\n","critical                                                         \n","0.0                              142                       142   \n","1.0                               67                        67   \n","\n","          topic_title_speed_limit  topic_title_too aggresive behaviour  \\\n","critical                                                                 \n","0.0                           142                                  142   \n","1.0                            67                                   67   \n","\n","          topic_title_use_phone_while_driving  \\\n","critical                                        \n","0.0                                       142   \n","1.0                                        67   \n","\n","          topic_title_wrong_drop_location  topic_title_wrong_way  pred  \n","critical                                                                \n","0.0                                   142                    142   142  \n","1.0                                    67                     67    67  \n","\n","[2 rows x 38 columns]"],"text/html":["\n","  <div id=\"df-1ea39e17-869f-4bfa-9930-bf9642bcadc2\">\n","    <div class=\"colab-df-container\">\n","      <div>\n","<style scoped>\n","    .dataframe tbody tr th:only-of-type {\n","        vertical-align: middle;\n","    }\n","\n","    .dataframe tbody tr th {\n","        vertical-align: top;\n","    }\n","\n","    .dataframe thead th {\n","        text-align: right;\n","    }\n","</style>\n","<table border=\"1\" class=\"dataframe\">\n","  <thead>\n","    <tr style=\"text-align: right;\">\n","      <th></th>\n","      <th>order_id</th>\n","      <th>feedback_id</th>\n","      <th>rider_id</th>\n","      <th>driver_id</th>\n","      <th>created_at</th>\n","      <th>region_id</th>\n","      <th>mark</th>\n","      <th>custom_comment</th>\n","      <th>price</th>\n","      <th>emotional</th>\n","      <th>...</th>\n","      <th>topic_title_passanger_disagree</th>\n","      <th>topic_title_personal_safety</th>\n","      <th>topic_title_point_of_start</th>\n","      <th>topic_title_rasism_covid</th>\n","      <th>topic_title_speed_limit</th>\n","      <th>topic_title_too aggresive behaviour</th>\n","      <th>topic_title_use_phone_while_driving</th>\n","      <th>topic_title_wrong_drop_location</th>\n","      <th>topic_title_wrong_way</th>\n","      <th>pred</th>\n","    </tr>\n","    <tr>\n","      <th>critical</th>\n","      <th></th>\n","      <th></th>\n","      <th></th>\n","      <th></th>\n","      <th></th>\n","      <th></th>\n","      <th></th>\n","      <th></th>\n","      <th></th>\n","      <th></th>\n","      <th></th>\n","      <th></th>\n","      <th></th>\n","      <th></th>\n","      <th></th>\n","      <th></th>\n","      <th></th>\n","      <th></th>\n","      <th></th>\n","      <th></th>\n","      <th></th>\n","    </tr>\n","  </thead>\n","  <tbody>\n","    <tr>\n","      <th>0.0</th>\n","      <td>142</td>\n","      <td>142</td>\n","      <td>142</td>\n","      <td>142</td>\n","      <td>142</td>\n","      <td>142</td>\n","      <td>142</td>\n","      <td>142</td>\n","      <td>13</td>\n","      <td>0</td>\n","      <td>...</td>\n","      <td>142</td>\n","      <td>142</td>\n","      <td>142</td>\n","      <td>142</td>\n","      <td>142</td>\n","      <td>142</td>\n","      <td>142</td>\n","      <td>142</td>\n","      <td>142</td>\n","      <td>142</td>\n","    </tr>\n","    <tr>\n","      <th>1.0</th>\n","      <td>67</td>\n","      <td>67</td>\n","      <td>67</td>\n","      <td>67</td>\n","      <td>67</td>\n","      <td>67</td>\n","      <td>67</td>\n","      <td>67</td>\n","      <td>1</td>\n","      <td>0</td>\n","      <td>...</td>\n","      <td>67</td>\n","      <td>67</td>\n","      <td>67</td>\n","      <td>67</td>\n","      <td>67</td>\n","      <td>67</td>\n","      <td>67</td>\n","      <td>67</td>\n","      <td>67</td>\n","      <td>67</td>\n","    </tr>\n","  </tbody>\n","</table>\n","<p>2 rows × 38 columns</p>\n","</div>\n","      <button class=\"colab-df-convert\" onclick=\"convertToInteractive('df-1ea39e17-869f-4bfa-9930-bf9642bcadc2')\"\n","              title=\"Convert this dataframe to an interactive table.\"\n","              style=\"display:none;\">\n","        \n","  <svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24px\"viewBox=\"0 0 24 24\"\n","       width=\"24px\">\n","    <path d=\"M0 0h24v24H0V0z\" fill=\"none\"/>\n","    <path d=\"M18.56 5.44l.94 2.06.94-2.06 2.06-.94-2.06-.94-.94-2.06-.94 2.06-2.06.94zm-11 1L8.5 8.5l.94-2.06 2.06-.94-2.06-.94L8.5 2.5l-.94 2.06-2.06.94zm10 10l.94 2.06.94-2.06 2.06-.94-2.06-.94-.94-2.06-.94 2.06-2.06.94z\"/><path d=\"M17.41 7.96l-1.37-1.37c-.4-.4-.92-.59-1.43-.59-.52 0-1.04.2-1.43.59L10.3 9.45l-7.72 7.72c-.78.78-.78 2.05 0 2.83L4 21.41c.39.39.9.59 1.41.59.51 0 1.02-.2 1.41-.59l7.78-7.78 2.81-2.81c.8-.78.8-2.07 0-2.86zM5.41 20L4 18.59l7.72-7.72 1.47 1.35L5.41 20z\"/>\n","  </svg>\n","      </button>\n","      \n","  <style>\n","    .colab-df-container {\n","      display:flex;\n","      flex-wrap:wrap;\n","      gap: 12px;\n","    }\n","\n","    .colab-df-convert {\n","      background-color: #E8F0FE;\n","      border: none;\n","      border-radius: 50%;\n","      cursor: pointer;\n","      display: none;\n","      fill: #1967D2;\n","      height: 32px;\n","      padding: 0 0 0 0;\n","      width: 32px;\n","    }\n","\n","    .colab-df-convert:hover {\n","      background-color: #E2EBFA;\n","      box-shadow: 0px 1px 2px rgba(60, 64, 67, 0.3), 0px 1px 3px 1px rgba(60, 64, 67, 0.15);\n","      fill: #174EA6;\n","    }\n","\n","    [theme=dark] .colab-df-convert {\n","      background-color: #3B4455;\n","      fill: #D2E3FC;\n","    }\n","\n","    [theme=dark] .colab-df-convert:hover {\n","      background-color: #434B5C;\n","      box-shadow: 0px 1px 3px 1px rgba(0, 0, 0, 0.15);\n","      filter: drop-shadow(0px 1px 2px rgba(0, 0, 0, 0.3));\n","      fill: #FFFFFF;\n","    }\n","  </style>\n","\n","      <script>\n","        const buttonEl =\n","          document.querySelector('#df-1ea39e17-869f-4bfa-9930-bf9642bcadc2 button.colab-df-convert');\n","        buttonEl.style.display =\n","          google.colab.kernel.accessAllowed ? 'block' : 'none';\n","\n","        async function convertToInteractive(key) {\n","          const element = document.querySelector('#df-1ea39e17-869f-4bfa-9930-bf9642bcadc2');\n","          const dataTable =\n","            await google.colab.kernel.invokeFunction('convertToInteractive',\n","                                                     [key], {});\n","          if (!dataTable) return;\n","\n","          const docLinkHtml = 'Like what you see? Visit the ' +\n","            '<a target=\"_blank\" href=https://colab.research.google.com/notebooks/data_table.ipynb>data table notebook</a>'\n","            + ' to learn more about interactive tables.';\n","          element.innerHTML = '';\n","          dataTable['output_type'] = 'display_data';\n","          await google.colab.output.renderOutput(dataTable, element);\n","          const docLink = document.createElement('div');\n","          docLink.innerHTML = docLinkHtml;\n","          element.appendChild(docLink);\n","        }\n","      </script>\n","    </div>\n","  </div>\n","  "]},"metadata":{},"execution_count":80}]},{"cell_type":"code","source":["X = input_var[[ 'region_id', 'mark','is_negative', 'advertising_other_services', 'lenth',\n","       'topic_title_aggresive_behaviour',\n","       'topic_title_car_broken', 'topic_title_dirty_car',\n","       'topic_title_driving_style', 'topic_title_extra_money_paid',\n","       'topic_title_language_conflict', 'topic_title_luggage_help',\n","       'topic_title_missundertanding', 'topic_title_not_optimal_way',\n","       'topic_title_passanger_disagree', 'topic_title_personal_safety',\n","       'topic_title_point_of_start', 'topic_title_rasism_covid',\n","       'topic_title_speed_limit', 'topic_title_too aggresive behaviour',\n","       'topic_title_use_phone_while_driving',\n","       'topic_title_wrong_drop_location', 'topic_title_wrong_way']]\n","\n","y = input_var['critical'].fillna(0).replace(0.5,0)"],"metadata":{"id":"0hJ_R9KSboGZ","executionInfo":{"status":"ok","timestamp":1674572744877,"user_tz":-60,"elapsed":514,"user":{"displayName":"Лиза Ганнич","userId":"05440454907585696632"}}},"execution_count":81,"outputs":[]},{"cell_type":"code","source":["# train a Gaussian Naive Bayes classifier on the training set\n","# instantiate the model\n","gnb = GaussianNB()\n","gnb.fit(X,y)"],"metadata":{"colab":{"base_uri":"https://localhost:8080/"},"id":"viN0J4K-fbAU","executionInfo":{"status":"ok","timestamp":1674572746702,"user_tz":-60,"elapsed":4,"user":{"displayName":"Лиза Ганнич","userId":"05440454907585696632"}},"outputId":"f1f7d9ff-9cd9-483a-9b82-e95f91ed879f"},"execution_count":82,"outputs":[{"output_type":"execute_result","data":{"text/plain":["GaussianNB()"]},"metadata":{},"execution_count":82}]},{"cell_type":"code","source":["y_pred = gnb.predict(X)\n","input_var['pred'] = y_pred"],"metadata":{"id":"OMQg66Ddfbpb","executionInfo":{"status":"ok","timestamp":1674572748528,"user_tz":-60,"elapsed":6,"user":{"displayName":"Лиза Ганнич","userId":"05440454907585696632"}}},"execution_count":83,"outputs":[]},{"cell_type":"code","source":["input_var.head(1)"],"metadata":{"colab":{"base_uri":"https://localhost:8080/","height":261},"id":"voliFvS4ftOY","executionInfo":{"status":"ok","timestamp":1674572748529,"user_tz":-60,"elapsed":5,"user":{"displayName":"Лиза Ганнич","userId":"05440454907585696632"}},"outputId":"8a871a48-2581-4b1f-bc36-a345136a9dd4"},"execution_count":84,"outputs":[{"output_type":"execute_result","data":{"text/plain":["                                order_id  \\\n","21  a815ac98-de97-48f8-b861-9639af54e452   \n","\n","                             feedback_id  \\\n","21  e6f68fd4-5969-4136-81d5-7f3bbbdeca2d   \n","\n","                                rider_id  \\\n","21  d16ec352-1efd-46df-9880-90929941934f   \n","\n","                               driver_id       created_at  region_id  mark  \\\n","21  aa7d6757-4bf7-4870-bf78-e19e2aa598d6  11/9/2021 14:08          6     1   \n","\n","         custom_comment  critical  price  ... topic_title_passanger_disagree  \\\n","21  Driver was arrogant       NaN    NaN  ...                              0   \n","\n","    topic_title_personal_safety  topic_title_point_of_start  \\\n","21                            0                           0   \n","\n","    topic_title_rasism_covid  topic_title_speed_limit  \\\n","21                         0                        0   \n","\n","   topic_title_too aggresive behaviour topic_title_use_phone_while_driving  \\\n","21                                   0                                   0   \n","\n","   topic_title_wrong_drop_location  topic_title_wrong_way  pred  \n","21                               0                      0   1.0  \n","\n","[1 rows x 39 columns]"],"text/html":["\n","  <div id=\"df-b3b07751-e829-4b4d-bf61-40fae09f479e\">\n","    <div class=\"colab-df-container\">\n","      <div>\n","<style scoped>\n","    .dataframe tbody tr th:only-of-type {\n","        vertical-align: middle;\n","    }\n","\n","    .dataframe tbody tr th {\n","        vertical-align: top;\n","    }\n","\n","    .dataframe thead th {\n","        text-align: right;\n","    }\n","</style>\n","<table border=\"1\" class=\"dataframe\">\n","  <thead>\n","    <tr style=\"text-align: right;\">\n","      <th></th>\n","      <th>order_id</th>\n","      <th>feedback_id</th>\n","      <th>rider_id</th>\n","      <th>driver_id</th>\n","      <th>created_at</th>\n","      <th>region_id</th>\n","      <th>mark</th>\n","      <th>custom_comment</th>\n","      <th>critical</th>\n","      <th>price</th>\n","      <th>...</th>\n","      <th>topic_title_passanger_disagree</th>\n","      <th>topic_title_personal_safety</th>\n","      <th>topic_title_point_of_start</th>\n","      <th>topic_title_rasism_covid</th>\n","      <th>topic_title_speed_limit</th>\n","      <th>topic_title_too aggresive behaviour</th>\n","      <th>topic_title_use_phone_while_driving</th>\n","      <th>topic_title_wrong_drop_location</th>\n","      <th>topic_title_wrong_way</th>\n","      <th>pred</th>\n","    </tr>\n","  </thead>\n","  <tbody>\n","    <tr>\n","      <th>21</th>\n","      <td>a815ac98-de97-48f8-b861-9639af54e452</td>\n","      <td>e6f68fd4-5969-4136-81d5-7f3bbbdeca2d</td>\n","      <td>d16ec352-1efd-46df-9880-90929941934f</td>\n","      <td>aa7d6757-4bf7-4870-bf78-e19e2aa598d6</td>\n","      <td>11/9/2021 14:08</td>\n","      <td>6</td>\n","      <td>1</td>\n","      <td>Driver was arrogant</td>\n","      <td>NaN</td>\n","      <td>NaN</td>\n","      <td>...</td>\n","      <td>0</td>\n","      <td>0</td>\n","      <td>0</td>\n","      <td>0</td>\n","      <td>0</td>\n","      <td>0</td>\n","      <td>0</td>\n","      <td>0</td>\n","      <td>0</td>\n","      <td>1.0</td>\n","    </tr>\n","  </tbody>\n","</table>\n","<p>1 rows × 39 columns</p>\n","</div>\n","      <button class=\"colab-df-convert\" onclick=\"convertToInteractive('df-b3b07751-e829-4b4d-bf61-40fae09f479e')\"\n","              title=\"Convert this dataframe to an interactive table.\"\n","              style=\"display:none;\">\n","        \n","  <svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24px\"viewBox=\"0 0 24 24\"\n","       width=\"24px\">\n","    <path d=\"M0 0h24v24H0V0z\" fill=\"none\"/>\n","    <path d=\"M18.56 5.44l.94 2.06.94-2.06 2.06-.94-2.06-.94-.94-2.06-.94 2.06-2.06.94zm-11 1L8.5 8.5l.94-2.06 2.06-.94-2.06-.94L8.5 2.5l-.94 2.06-2.06.94zm10 10l.94 2.06.94-2.06 2.06-.94-2.06-.94-.94-2.06-.94 2.06-2.06.94z\"/><path d=\"M17.41 7.96l-1.37-1.37c-.4-.4-.92-.59-1.43-.59-.52 0-1.04.2-1.43.59L10.3 9.45l-7.72 7.72c-.78.78-.78 2.05 0 2.83L4 21.41c.39.39.9.59 1.41.59.51 0 1.02-.2 1.41-.59l7.78-7.78 2.81-2.81c.8-.78.8-2.07 0-2.86zM5.41 20L4 18.59l7.72-7.72 1.47 1.35L5.41 20z\"/>\n","  </svg>\n","      </button>\n","      \n","  <style>\n","    .colab-df-container {\n","      display:flex;\n","      flex-wrap:wrap;\n","      gap: 12px;\n","    }\n","\n","    .colab-df-convert {\n","      background-color: #E8F0FE;\n","      border: none;\n","      border-radius: 50%;\n","      cursor: pointer;\n","      display: none;\n","      fill: #1967D2;\n","      height: 32px;\n","      padding: 0 0 0 0;\n","      width: 32px;\n","    }\n","\n","    .colab-df-convert:hover {\n","      background-color: #E2EBFA;\n","      box-shadow: 0px 1px 2px rgba(60, 64, 67, 0.3), 0px 1px 3px 1px rgba(60, 64, 67, 0.15);\n","      fill: #174EA6;\n","    }\n","\n","    [theme=dark] .colab-df-convert {\n","      background-color: #3B4455;\n","      fill: #D2E3FC;\n","    }\n","\n","    [theme=dark] .colab-df-convert:hover {\n","      background-color: #434B5C;\n","      box-shadow: 0px 1px 3px 1px rgba(0, 0, 0, 0.15);\n","      filter: drop-shadow(0px 1px 2px rgba(0, 0, 0, 0.3));\n","      fill: #FFFFFF;\n","    }\n","  </style>\n","\n","      <script>\n","        const buttonEl =\n","          document.querySelector('#df-b3b07751-e829-4b4d-bf61-40fae09f479e button.colab-df-convert');\n","        buttonEl.style.display =\n","          google.colab.kernel.accessAllowed ? 'block' : 'none';\n","\n","        async function convertToInteractive(key) {\n","          const element = document.querySelector('#df-b3b07751-e829-4b4d-bf61-40fae09f479e');\n","          const dataTable =\n","            await google.colab.kernel.invokeFunction('convertToInteractive',\n","                                                     [key], {});\n","          if (!dataTable) return;\n","\n","          const docLinkHtml = 'Like what you see? Visit the ' +\n","            '<a target=\"_blank\" href=https://colab.research.google.com/notebooks/data_table.ipynb>data table notebook</a>'\n","            + ' to learn more about interactive tables.';\n","          element.innerHTML = '';\n","          dataTable['output_type'] = 'display_data';\n","          await google.colab.output.renderOutput(dataTable, element);\n","          const docLink = document.createElement('div');\n","          docLink.innerHTML = docLinkHtml;\n","          element.appendChild(docLink);\n","        }\n","      </script>\n","    </div>\n","  </div>\n","  "]},"metadata":{},"execution_count":84}]},{"cell_type":"code","source":["# Print the Confusion Matrix and slice it into four pieces\n","# cm = confusion_matrix(y_test, y_pred)\n","cm = confusion_matrix(y, y_pred)\n","\n","\n","print('Confusion matrix\\n\\n', cm)\n","\n","print('\\nTrue Positives(TP) = ', cm[0,0])\n","\n","print('\\nTrue Negatives(TN) = ', cm[1,1])\n","\n","print('\\nFalse Positives(FP) = ', cm[0,1])\n","\n","print('\\nFalse Negatives(FN) = ', cm[1,0])"],"metadata":{"colab":{"base_uri":"https://localhost:8080/"},"id":"qBZOfqcYgrCm","executionInfo":{"status":"ok","timestamp":1674572752749,"user_tz":-60,"elapsed":4,"user":{"displayName":"Лиза Ганнич","userId":"05440454907585696632"}},"outputId":"363067d3-76e1-4bed-b329-a0bf2c183ba7"},"execution_count":85,"outputs":[{"output_type":"stream","name":"stdout","text":["Confusion matrix\n","\n"," [[1771 2279]\n"," [   0   67]]\n","\n","True Positives(TP) =  1771\n","\n","True Negatives(TN) =  67\n","\n","False Positives(FP) =  2279\n","\n","False Negatives(FN) =  0\n"]}]},{"cell_type":"code","source":["from sklearn.metrics import classification_report\n","print(classification_report(y, y_pred))"],"metadata":{"id":"QWEU1gKng7G9","colab":{"base_uri":"https://localhost:8080/"},"executionInfo":{"status":"ok","timestamp":1674572757870,"user_tz":-60,"elapsed":398,"user":{"displayName":"Лиза Ганнич","userId":"05440454907585696632"}},"outputId":"76327d10-b082-4d2f-bb0d-fc2105d99b44"},"execution_count":86,"outputs":[{"output_type":"stream","name":"stdout","text":["              precision    recall  f1-score   support\n","\n","         0.0       1.00      0.44      0.61      4050\n","         1.0       0.03      1.00      0.06        67\n","\n","    accuracy                           0.45      4117\n","   macro avg       0.51      0.72      0.33      4117\n","weighted avg       0.98      0.45      0.60      4117\n","\n"]}]},{"cell_type":"code","source":["#Preparing the model\n","from sklearn.model_selection import train_test_split\n","# X_train, X_test, y_train, y_test = train_test_split(X,y, test_size = 0.20, random_state = 99)\n","from sklearn.linear_model import LogisticRegression\n","model = LogisticRegression()\n","# model.fit(X_train, y_train)\n","# model.score(X_test,y_test)\n","model.fit(X, y)\n","print(model.predict_proba(X)[0])\n","# model.score(X,y)"],"metadata":{"colab":{"base_uri":"https://localhost:8080/"},"id":"ymjOnPiof2b5","executionInfo":{"status":"ok","timestamp":1674572761878,"user_tz":-60,"elapsed":4,"user":{"displayName":"Лиза Ганнич","userId":"05440454907585696632"}},"outputId":"64155643-841e-4022-b654-90ec2a16acd3"},"execution_count":87,"outputs":[{"output_type":"stream","name":"stdout","text":["[0.98466087 0.01533913]\n"]}]},{"cell_type":"code","source":["# Let's implement simple classifiers\n","\n","classifiers = {\n","    \"LogisiticRegression\": LogisticRegression(),\n","    \"KNearest\": KNeighborsClassifier(),\n","    \"Support Vector Classifier\": SVC(),\n","    \"DecisionTreeClassifier\": DecisionTreeClassifier()\n","}"],"metadata":{"id":"1BHI-8ojgaQJ","executionInfo":{"status":"ok","timestamp":1674572768738,"user_tz":-60,"elapsed":515,"user":{"displayName":"Лиза Ганнич","userId":"05440454907585696632"}}},"execution_count":88,"outputs":[]},{"cell_type":"code","source":["# Wow our scores are getting even high scores even when applying cross validation.\n","from sklearn.model_selection import cross_val_score\n","\n","\n","for key, classifier in classifiers.items():\n","    # classifier.fit(X_train, y_train)\n","    # training_score = cross_val_score(classifier, X_train, y_train, cv=5)\n","    classifier.fit(X, y)\n","    training_score = cross_val_score(classifier, X, y, cv=5)\n","    print(\"Classifiers: \", classifier.__class__.__name__, \"Has a training score of\", round(training_score.mean(), 2) * 100, \"% accuracy score\")"],"metadata":{"colab":{"base_uri":"https://localhost:8080/"},"id":"dF1PHQd4hNAD","executionInfo":{"status":"ok","timestamp":1674572774654,"user_tz":-60,"elapsed":3665,"user":{"displayName":"Лиза Ганнич","userId":"05440454907585696632"}},"outputId":"7c81c0fc-2bac-4bf2-c902-ffe85d77a6a3"},"execution_count":89,"outputs":[{"output_type":"stream","name":"stdout","text":["Classifiers:  LogisticRegression Has a training score of 98.0 % accuracy score\n","Classifiers:  KNeighborsClassifier Has a training score of 97.0 % accuracy score\n","Classifiers:  SVC Has a training score of 98.0 % accuracy score\n","Classifiers:  DecisionTreeClassifier Has a training score of 97.0 % accuracy score\n"]}]},{"cell_type":"code","source":[],"metadata":{"id":"LDzw0e8SUKmL"},"execution_count":null,"outputs":[]}]}